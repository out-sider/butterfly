<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">body { margin-left:0;margin-right:0;margin-top:0; }#google-cache-hdr {background:#f5f5f5 !important;font:13px arial,sans-serif !important;text-align:left !important;color:#202020 !important;border:0 !important;margin:0 !important;border-bottom:1px solid #cecece !important;line-height:16px !important ;padding:16px 28px 24px 28px !important;}#google-cache-hdr * {display:inline !important;font:inherit !important;text-align:inherit !important;color:inherit !important;line-height:inherit !important;background:none !important;border:0 !important;margin:0 !important;padding:0 !important;letter-spacing:0 !important;}#google-cache-hdr a {text-decoration:none !important;color:#1a0dab !important;}#google-cache-hdr a:hover { text-decoration:underline !important; }#google-cache-hdr a:visited { color:#609 !important; }#google-cache-hdr div { display:block !important;margin-top:4px !important; }#google-cache-hdr b {font-weight:bold !important;display:inline-block !important;direction:ltr !important;}pre { word-wrap:break-word; }pre { white-space:pre-wrap; }</style></head><body bgcolor="#ffffff" link="blue" vlink="blue"><div id="google-cache-hdr" dir="ltr"><div>This is the html version of the file <a href="http://www.dicat.unige.it/guerrero/oftraining/9tipsandtricks.pdf" dir="ltr">http://www.dicat.unige.it/guerrero/oftraining/9tipsandtricks.pdf</a>.<br><b>Google</b> automatically generates html versions of documents as we crawl the web.</div></div><div style="position:relative;margin:8px;">


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Producer" content="Mac OS X 10.10.4 Quartz PDFContext">
<meta name="Creator" content="PowerPoint">
<meta name="CreationDate" content="D:20150710213944Z00'00'">
<meta name="ModDate" content="D:20150710213944Z00'00'">
<title>“This offering is not approved or endorsed by OpenCFD Limited, the producer of the OpenFOAM software and owner of the OPENFOAM</title>

<table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="1"><b>Page 1</b></a></font></td></tr></tbody></table><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:198;left:419"><nobr><b>Disclaimer</b></nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:52px;font-family:Times">
<div style="position:absolute;top:437;left:54"><nobr>“This offering is not approved or</nobr></div>
<div style="position:absolute;top:502;left:54"><nobr>endorsed by OpenCFD Limited, the</nobr></div>
<div style="position:absolute;top:566;left:54"><nobr>producer of the OpenFOAM software</nobr></div>
<div style="position:absolute;top:631;left:54"><nobr>and owner of the OPENFOAM®  and</nobr></div>
<div style="position:absolute;top:695;left:54"><nobr>OpenCFD®  trade marks.”  </nobr></div>
</span></font>

<div style="position:absolute;top:985;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="2"><b>Page 2</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:1124;left:151"><nobr><b>Introductory OpenFOAM® Course</b></nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:46px;font-family:Times">
<div style="position:absolute;top:1400;left:224"><nobr><b>University of Genoa, DICCA</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:1467;left:206"><nobr><b>D</b>ipartimento di <b>I</b>ngegneria <b>C</b>ivile, <b>C</b>himica e <b>A</b>mbientale</nobr></div>
</span></font>
<font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:1208;left:235"><nobr><b>From 13<font style="font-size:29px">th </font>to 17<font style="font-size:29px">th </font>July, 2015 </b></nobr></div>
</span></font>

<div style="position:absolute;top:1795;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="3"><b>Page 3</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:1818;left:371"><nobr><b>Today’s lecture</b></nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:40px;font-family:Times">
<div style="position:absolute;top:2191;left:54"><nobr><b>1.  Tips and tricks in OpenFOAM® </b></nobr></div>
</span></font>

<div style="position:absolute;top:2605;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="4"><b>Page 4</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:2628;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:40px;font-family:Times">
<div style="position:absolute;top:2741;left:293"><nobr>Where and how should we</nobr></div>
<div style="position:absolute;top:2790;left:419"><nobr>put more salt</nobr></div>
</span></font>

<div style="position:absolute;top:3415;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="5"><b>Page 5</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:3438;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:40px;font-family:Times">
<div style="position:absolute;top:3551;left:14"><nobr>… and as this is kind of a cooking recipe, it comes with a</nobr></div>
<div style="position:absolute;top:3600;left:412"><nobr>small warning</nobr></div>
</span></font>

<div style="position:absolute;top:4225;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="6"><b>Page 6</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:4248;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:28px;font-family:Times">
<div style="position:absolute;top:4360;left:11"><nobr>•  What I am about to show you is based on my personal experience.  </nobr></div>
<div style="position:absolute;top:4432;left:11"><nobr>•  To draw these kind of conclusions or observations, I conducted hundreds of</nobr></div>
<div style="position:absolute;top:4468;left:51"><nobr>numerical experiments, under different conditions, with different meshes</nobr></div>
<div style="position:absolute;top:4504;left:51"><nobr>(from good quality meshes to bad quality meshes with different element</nobr></div>
<div style="position:absolute;top:4540;left:51"><nobr>types), and different physics and models involved.</nobr></div>
<div style="position:absolute;top:4612;left:11"><nobr>•  Most important of all, before starting this long road, I got familiar with the</nobr></div>
<div style="position:absolute;top:4648;left:51"><nobr>theory behind the FVM and CFD, the physics behind what I was doing, and</nobr></div>
<div style="position:absolute;top:4684;left:51"><nobr>OpenFOAM® source code.</nobr></div>
<div style="position:absolute;top:4756;left:11"><nobr>•  At this point, I highly advise you to conduct similar numerical experiments</nobr></div>
<div style="position:absolute;top:4792;left:51"><nobr>and draw your own conclusions.</nobr></div>
<div style="position:absolute;top:4864;left:11"><nobr>•  Please, use these slides as a reference only.  I am not responsible for your</nobr></div>
<div style="position:absolute;top:4900;left:51"><nobr>failures and mistakes.</nobr></div>
</span></font>

<div style="position:absolute;top:5035;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="7"><b>Page 7</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:5058;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:5150;left:358"><nobr><b>Our vertical workflow</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:5211;left:13"><nobr>•  Do you remember this vertical workflow? I hope so.</nobr></div>
<div style="position:absolute;top:5261;left:13"><nobr>•  Everything starts with the geometry.  So in order to</nobr></div>
<div style="position:absolute;top:5294;left:46"><nobr>get a good mesh, you need a good geometry.</nobr></div>
<div style="position:absolute;top:5343;left:13"><nobr>•  When it comes to geometry generation, the only rule</nobr></div>
<div style="position:absolute;top:5376;left:46"><nobr>you should keep in mind is that by the end of the day</nobr></div>
<div style="position:absolute;top:5409;left:46"><nobr>you should get a unique clean and watertight</nobr></div>
<div style="position:absolute;top:5441;left:46"><nobr>geometry.</nobr></div>
<div style="position:absolute;top:5492;left:13"><nobr>•  Geometry defeaturing can made your life easier.  Do</nobr></div>
<div style="position:absolute;top:5523;left:46"><nobr>not fool yourself, if you have no constraints avoid</nobr></div>
<div style="position:absolute;top:5556;left:46"><nobr>sharp angles.  </nobr></div>
<div style="position:absolute;top:5607;left:13"><nobr>•  And as for the mesh concerns, try to keep the</nobr></div>
<div style="position:absolute;top:5639;left:46"><nobr>skewness, orthogonality, aspect ratio, and growth rate</nobr></div>
<div style="position:absolute;top:5672;left:46"><nobr>low.</nobr></div>
<div style="position:absolute;top:5721;left:13"><nobr>•  No need to say that if you have a bad geometry, is</nobr></div>
<div style="position:absolute;top:5754;left:46"><nobr>likely probable that your mesh will be bad as well.</nobr></div>
<div style="position:absolute;top:5805;left:13"><nobr>•  Always remember:     <b>good mesh – good results.</b></nobr></div>
</span></font>
<font face="Times" size="3"><span style="font-size:13px;font-family:Times">
<div style="position:absolute;top:5409;left:820"><nobr><b>MESH GENERATION</b></nobr></div>
<div style="position:absolute;top:5298;left:798"><nobr><b>GEOMETRY GENERATION</b></nobr></div>
<div style="position:absolute;top:5631;left:819"><nobr><b>POST-PROCESSING</b></nobr></div>
<div style="position:absolute;top:5520;left:785"><nobr><b>CASE SETUP AND SOLUTION</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:5795;left:1015"><nobr><b>1 </b></nobr></div>
</span></font>

<div style="position:absolute;top:5845;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="8"><b>Page 8</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:5868;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:22px;font-family:Times;color:#660066">
<div style="position:absolute;top:6182;left:59"><nobr><b>### OPENFOAM ###</b></nobr></div>
<div style="position:absolute;top:6239;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-1.6-ext/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6267;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-1.6-ext.GPU/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6296;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-1.7.1/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6326;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-2.0.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6354;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-2.1.1/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6383;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-2.2.0/etc/bashrc </b></nobr></div>
<div style="position:absolute;top:6411;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-2.2.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:6440;left:59"><nobr><b>#     source $HOME/OpenFOAM/OpenFOAM-2.3.0-debug/etc/bashrc </b></nobr></div>
</span></font>
<font color="#ff6600" face="Times" size="4"><span style="font-size:22px;font-family:Times;color:#ff6600">
<div style="position:absolute;top:6468;left:145"><nobr><b>source $HOME/OpenFOAM/OpenFOAM-2.3.x/etc/bashrc</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:22px;font-family:Times;color:#660066">
<div style="position:absolute;top:6555;left:59"><nobr><b>### OPENFOAM ###</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:5960;left:270"><nobr><b>OpenFOAM® shell environment </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:6028;left:11"><nobr>•  You can have as many versions of OpenFOAM® as you like living together.  You just</nobr></div>
<div style="position:absolute;top:6059;left:44"><nobr>need to source the right environment variables.  For instance, on my workstation I</nobr></div>
<div style="position:absolute;top:6092;left:44"><nobr>have nine versions living together.   This is how my <b><font color="#77933c">.bashrc </font></b>file looks like, </nobr></div>
</span></font>

<div style="position:absolute;top:6655;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="9"><b>Page 9</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:6678;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#660066">
<div style="position:absolute;top:7014;left:8"><nobr><b>### OPENFOAM ###</b></nobr></div>
<div style="position:absolute;top:7050;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.6-ext/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7068;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.6-ext.GPU/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7086;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.7.1/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7104;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.0.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7122;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.1.1/etc/bashrc</b></nobr></div>
</span></font>
<font color="#ff6600" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#ff6600">
<div style="position:absolute;top:7140;left:44"><nobr><b>source $HOME/OpenFOAM/OpenFOAM-2.2.0/etc/bashrc</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#660066">
<div style="position:absolute;top:7158;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.2.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7176;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.3.0-debug/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7194;left:8"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.3.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7230;left:8"><nobr><b>### OPENFOAM ###</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:6770;left:270"><nobr><b>OpenFOAM® shell environment </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:6838;left:11"><nobr>•  If at any time I want to use a different version of OpenFOAM®, I just source the right</nobr></div>
<div style="position:absolute;top:6869;left:44"><nobr>OpenFOAM® environment variables.  For instance if I want to switch from version</nobr></div>
<div style="position:absolute;top:6902;left:44"><nobr>2.2.0 to version 2.3.x, I modify my <b><font color="#77933c">.bashrc </font></b>as follows,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#660066">
<div style="position:absolute;top:7014;left:561"><nobr><b>### OPENFOAM ###</b></nobr></div>
<div style="position:absolute;top:7050;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.6-ext/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7068;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.6-ext.GPU/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7086;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-1.7.1/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7104;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.0.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7122;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.1.1/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7140;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.2.0/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7158;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.2.x/etc/bashrc</b></nobr></div>
<div style="position:absolute;top:7176;left:561"><nobr><b>#   source $HOME/OpenFOAM/OpenFOAM-2.3.0-debug/etc/bashrc</b></nobr></div>
</span></font>
<font color="#ff6600" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#ff6600">
<div style="position:absolute;top:7194;left:597"><nobr><b>source $HOME/OpenFOAM/OpenFOAM-2.3.x/etc/bashrc</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:13px;font-family:Times;color:#660066">
<div style="position:absolute;top:7230;left:561"><nobr><b>### OPENFOAM ###</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:22px;font-family:Times">
<div style="position:absolute;top:6969;left:165"><nobr><b>Old <font color="#77933c">.bashrc</font></b></nobr></div>
<div style="position:absolute;top:6969;left:710"><nobr><b>New <font color="#77933c">.bashrc</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:7285;left:13"><nobr>•  Then open a new terminal, and you can start using the new version.  You can also</nobr></div>
<div style="position:absolute;top:7316;left:46"><nobr>have two different versions of OpenFOAM® running together at the same time in</nobr></div>
<div style="position:absolute;top:7349;left:46"><nobr>different terminals.  </nobr></div>
<div style="position:absolute;top:7399;left:13"><nobr>•  You can also use aliases to source the OpenFOAM® version. </nobr></div>
</span></font>

<div style="position:absolute;top:7465;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="10"><b>Page 10</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:7488;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:7580;left:270"><nobr><b>OpenFOAM® shell environment </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:7648;left:11"><nobr>•  When switching from one OpenFOAM® version to another one, it is highly advisable</nobr></div>
<div style="position:absolute;top:7679;left:44"><nobr>to clear as many OpenFOAM environment settings as possible, to do so you can use</nobr></div>
<div style="position:absolute;top:7712;left:44"><nobr>the script <b><font color="#77933c">unset.sh</font></b><font color="#77933c">.  </font>In the terminal type:</nobr></div>
</span></font>
<font color="#77933c" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#77933c">
<div style="position:absolute;top:7762;left:119"><nobr>•  <b>unset</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:7864;left:11"><nobr>•  Be careful, there may be more than one <b><font color="#77933c">unset.sh </font></b>script. The OpenFOAM® specific</nobr></div>
<div style="position:absolute;top:7895;left:44"><nobr>script is located in the directory <b>$WM_PROJECT_DIR/etc/config.</b></nobr></div>
<div style="position:absolute;top:7996;left:11"><nobr>•  You can also use the alias <b><font color="#558ed5">wmUNSET</font></b>, which is set in the OpenFOAM® environment</nobr></div>
<div style="position:absolute;top:8029;left:44"><nobr>variables.  Remember, you can type <b><font color="#558ed5">alias </font></b>in the terminal window to see all the</nobr></div>
<div style="position:absolute;top:8062;left:44"><nobr>aliases available.</nobr></div>
<div style="position:absolute;top:8162;left:11"><nobr>•  In the directory <b>$WM_PROJECT_DIR/etc/config</b>, you will also find many useful</nobr></div>
<div style="position:absolute;top:8194;left:44"><nobr>scripts.  For instance, you can take a look at the script <b><font color="#77933c">aliases.sh</font></b>, in this script you</nobr></div>
<div style="position:absolute;top:8227;left:44"><nobr>will find all the aliases defined in OpenFOAM®  </nobr></div>
</span></font>

<div style="position:absolute;top:8275;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="11"><b>Page 11</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:8298;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:8390;left:89"><nobr><b>Looking for information in OpenFOAM® source code </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:8458;left:11"><nobr>•  To locate files you can use the <b><font color="#558ed5">find </font></b>command.  For instance, if you want to locate a</nobr></div>
<div style="position:absolute;top:8489;left:44"><nobr>file that contains the string fvPatch in its name you can proceed as follows,</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:8590;left:65"><nobr>•  <b>find <font color="#000000">$FOAM_SOLVERS -name “*fvPatch*”</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:8641;left:65"><nobr>This command will locate the files containing the string “*fvPatch*” in the</nobr></div>
<div style="position:absolute;top:8674;left:65"><nobr>directory <b>$FOAM_SOLVERS </b></nobr></div>
<div style="position:absolute;top:8774;left:11"><nobr>•  If you want to find a string inside a file, you can use the command <b><font color="#558ed5">grep</font></b></nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:8875;left:65"><nobr>•  <b>grep <font color="#000000">-r -n  LES $FOAM_SOLVERS </font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:8926;left:65"><nobr>This command will look for the string LES in all files inside the directory</nobr></div>
<div style="position:absolute;top:8959;left:65"><nobr><b>$FOAM_SOLVERS</b>.  The option -r means recursive and -n will output the line</nobr></div>
<div style="position:absolute;top:8990;left:65"><nobr>number. </nobr></div>
</span></font>

<div style="position:absolute;top:9085;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="12"><b>Page 12</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:9108;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:9268;left:11"><nobr>•  As you might already know, there are a gazillion dictionaries in OpenFOAM®.  The</nobr></div>
<div style="position:absolute;top:9299;left:44"><nobr>easiest way to find all of them is to do a local search in the installation directory as</nobr></div>
<div style="position:absolute;top:9332;left:44"><nobr>follows,</nobr></div>
<div style="position:absolute;top:9397;left:65"><nobr>•  For instance, if you are interested in finding all dictionary files that end with the</nobr></div>
<div style="position:absolute;top:9430;left:98"><nobr>“Dict” word in the <b>tutorials </b>directory, in the terminal type: </nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:9494;left:119"><nobr>•  <b>find <font color="#000000">$FOAM_TUTORIALS -name </font><font color="#77933c">"*Dict”</font></b></nobr></div>
<div style="position:absolute;top:9559;left:119"><nobr>•  <b>find <font color="#000000">$FOAM_TUTORIALS -iname </font><font color="#77933c">”*dict”</font></b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:9200;left:89"><nobr><b>Looking for information in OpenFOAM® source code  </b></nobr></div>
</span></font>

<div style="position:absolute;top:9895;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="13"><b>Page 13</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:9918;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:10078;left:11"><nobr>•  A few more advanced commands to find information in your OpenFOAM® installation. </nobr></div>
<div style="position:absolute;top:10142;left:65"><nobr>•  To find which tutorial files use the boundary condition "slip": </nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:10207;left:119"><nobr>•  <b>find <font color="#000000">$FOAM_TUTORIALS -type f | xargs </font>grep <font color="#000000">-sl 'slip’</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:10304;left:65"><nobr>•  To find where the source code for the boundary condition "slip" is located: </nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:10369;left:119"><nobr>•  <b>find <font color="#000000">$FOAM_SRC -name "*slip*”</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:10466;left:65"><nobr>•  To find  what applications do not run in parallel</nobr></div>
<div style="position:absolute;top:10531;left:119"><nobr>•  <b>$WM_PROJECT_DIR -type f  | xargs <font color="#558ed5">grep </font>-sl ’noParallel’</b></nobr></div>
<div style="position:absolute;top:10628;left:65"><nobr>•  Remember, OpenFOAM® understand REGEX syntax.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:10010;left:89"><nobr><b>Looking for information in OpenFOAM® source code  </b></nobr></div>
</span></font>

<div style="position:absolute;top:10705;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="14"><b>Page 14</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:10728;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:10818;left:214"><nobr><b>OpenFOAM® Doxygen documentation</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:10881;left:11"><nobr>•  The best source of information is the source code and the Doxygen documentation.</nobr></div>
<div style="position:absolute;top:10970;left:11"><nobr>•  The  <b>$WM_PROJECT_DIR/doc </b>directory contains the Doxygen documentation of</nobr></div>
<div style="position:absolute;top:11001;left:44"><nobr>OpenFOAM<b>®</b>.</nobr></div>
<div style="position:absolute;top:11091;left:11"><nobr>•  Before using the Doxygen documentation, you will need to compile it. To compile the</nobr></div>
<div style="position:absolute;top:11123;left:44"><nobr>Doxygen documentation, from the terminal:</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:11168;left:65"><nobr>•  <b>cd <font color="#000000">$WM_PROJECT_DIR</font></b></nobr></div>
<div style="position:absolute;top:11211;left:65"><nobr>•  <b>./Allwmake doc  </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:11256;left:214"><nobr><b>Note: You will need to install <font color="#558ed5">doxygen </font>and <font color="#558ed5">graphviz/dot</font></b></nobr></div>
<div style="position:absolute;top:11345;left:11"><nobr>•  After compiling the Doxygen documentation you can use it by typing:</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:11390;left:65"><nobr>•  <b>firefox <font color="#000000">file://$WM_PROJECT_DIR/doc/Doxygen/html/</font><font color="#77933c">index.html</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:11475;left:11"><nobr>•  The compilation is time consuming. </nobr></div>
</span></font>

<div style="position:absolute;top:11515;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="15"><b>Page 15</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:11538;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:11630;left:439"><nobr><b>Intensive IO</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:11698;left:11"><nobr>•  If you are doing intensive IO or running big cases, I highly advise you to save the</nobr></div>
<div style="position:absolute;top:11729;left:44"><nobr>solution in binary format.  When using binary format, the IO is a way much faster and</nobr></div>
<div style="position:absolute;top:11762;left:44"><nobr>the output files use less space.</nobr></div>
<div style="position:absolute;top:11827;left:11"><nobr>•  Remember, you can get a performance gain when you save in binary format as you</nobr></div>
<div style="position:absolute;top:11858;left:44"><nobr>minimize any requirement for parsing.</nobr></div>
<div style="position:absolute;top:11890;left:11"><nobr>	
 &nbsp;</nobr></div>
<div style="position:absolute;top:11924;left:11"><nobr>•  If OpenFOAM® binary format is not good enough for you, you can try another format. </nobr></div>
<div style="position:absolute;top:11956;left:44"><nobr>For instance you can use HDF5 format with OpenFOAM®.</nobr></div>
</span></font>
<font color="#0000ff" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:12022;left:119"><nobr>http://openfoamwiki.net/index.php/Contrib/IOH5Write</nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:12052;left:11"><nobr>	
 &nbsp;</nobr></div>
</span></font>

<div style="position:absolute;top:12325;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="16"><b>Page 16</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:12348;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:12440;left:439"><nobr><b>Intensive IO</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:12508;left:11"><nobr>•  Know your hardware, intensive IO can slow-down your computations or crash your</nobr></div>
<div style="position:absolute;top:12539;left:44"><nobr>system, even the most powerful supercomputers.</nobr></div>
<div style="position:absolute;top:12604;left:11"><nobr>•  For big simulations, most of the times the bottleneck is the IO.</nobr></div>
<div style="position:absolute;top:12668;left:11"><nobr>•  No need to say that eventually you will run out of space if you are working with big</nobr></div>
<div style="position:absolute;top:12701;left:44"><nobr>files.</nobr></div>
<div style="position:absolute;top:12766;left:11"><nobr>•  One naïve solution to the IO bottleneck and big datasets space, do not save your</nobr></div>
<div style="position:absolute;top:12799;left:44"><nobr>solution very often.  But be careful, at least save your solution before stopping your</nobr></div>
<div style="position:absolute;top:12832;left:44"><nobr>solution or reaching the job maximum time.	
 &nbsp;</nobr></div>
</span></font>

<div style="position:absolute;top:13135;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="17"><b>Page 17</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:13158;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:13250;left:368"><nobr><b>Running in a cluster</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:13318;left:11"><nobr>•  Best advice, familiarize with your hardware.</nobr></div>
<div style="position:absolute;top:13382;left:11"><nobr>•  Do not get overwhelm when running in a cluster.  Running OpenFOAM® in a cluster</nobr></div>
<div style="position:absolute;top:13414;left:44"><nobr>is not different from running in your workstation or portable computer.  The only</nobr></div>
<div style="position:absolute;top:13447;left:44"><nobr>difference is that you need to schedule your jobs.</nobr></div>
<div style="position:absolute;top:13511;left:11"><nobr>•  Depending on the system current demand of resources, the resources you request</nobr></div>
<div style="position:absolute;top:13544;left:44"><nobr>and your job priority, sometimes you can be in queue for hours, even days, so be</nobr></div>
<div style="position:absolute;top:13576;left:44"><nobr>patient and wait for your turn.</nobr></div>
<div style="position:absolute;top:13642;left:11"><nobr>•  Consequently, remember to always double or triple check your scripts.  It will be a</nobr></div>
<div style="position:absolute;top:13673;left:44"><nobr>waste of time if after two days in queue, your simulation did not start because there</nobr></div>
<div style="position:absolute;top:13706;left:44"><nobr>were errors in your scripts.</nobr></div>
<div style="position:absolute;top:13771;left:11"><nobr>•  For those running on fancy clusters, such as blue gene supercomputers, I have found</nobr></div>
<div style="position:absolute;top:13804;left:44"><nobr>a processor limit of 512, after that is quite difficult to get any improvement.</nobr></div>
<div style="position:absolute;top:13868;left:11"><nobr>•  Also, the IO is really time consuming.	
 &nbsp;</nobr></div>
</span></font>

<div style="position:absolute;top:13945;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="18"><b>Page 18</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:13968;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:14060;left:368"><nobr><b>Running in a cluster</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:14128;left:11"><nobr>•  By the way, I know it looks super cool, but try to avoid spaces or funny characters</nobr></div>
<div style="position:absolute;top:14159;left:44"><nobr>when naming directories and files, specially if you run in clusters.  <i>e.g.</i>: </nobr></div>
</span></font>
<font color="#77933c" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#77933c">
<div style="position:absolute;top:14233;left:119"><nobr>•  <b>my dictionary.dict  </b><font color="#000000">instead use   </font><b>my_dictionary.dict</b></nobr></div>
<div style="position:absolute;top:14284;left:119"><nobr>•  <b>#my_file;txt   </b><font color="#000000">instead use   </font><b>my_file.txt</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:14335;left:119"><nobr>•  <b>my/solution!!!   </b>instead use   <b>my_solution</b></nobr></div>
<div style="position:absolute;top:14384;left:119"><nobr>•  <b>working@home    </b>instead use   <b>working_at_home</b></nobr></div>
<div style="position:absolute;top:14425;left:11"><nobr>	
 &nbsp;</nobr></div>
<div style="position:absolute;top:14457;left:11"><nobr>	
 &nbsp;</nobr></div>
</span></font>

<div style="position:absolute;top:14755;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="19"><b>Page 19</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:14778;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:14870;left:122"><nobr><b>OpenFOAM® mesh quality and checkMesh utility</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:14938;left:11"><nobr>•  Before running a simulation remember to always check the mesh quality using the</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:14971;left:44"><nobr><b>checkMesh </b><font color="#000000">utility. </font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:15020;left:11"><nobr>•  Remember, <b>good quality meshes </b>are of paramount importance to obtain accurate</nobr></div>
<div style="position:absolute;top:15052;left:44"><nobr>results.</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:15103;left:11"><nobr>•  <b>checkMesh </b><font color="#000000">will also check for topological errors.</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:15154;left:11"><nobr>•  Have in mind that topological errors must be repaired. </nobr></div>
<div style="position:absolute;top:15203;left:11"><nobr>•  You will be able to run with mesh quality errors (such as skewness, aspect ratio,</nobr></div>
<div style="position:absolute;top:15236;left:44"><nobr>minimum face area, and non-orthogonality),  but they will severely tamper the solution</nobr></div>
<div style="position:absolute;top:15268;left:44"><nobr>accuracy and can made the solver run super slow or even blow-up.</nobr></div>
<div style="position:absolute;top:15319;left:11"><nobr>•  In my personal experience, I have found that OpenFOAM® is very picky when it</nobr></div>
<div style="position:absolute;top:15352;left:44"><nobr>comes to mesh quality.  So if <b><font color="#558ed5">checkMesh </font></b>is telling you that the mesh is bad, you</nobr></div>
<div style="position:absolute;top:15383;left:44"><nobr>better correct those errors.</nobr></div>
<div style="position:absolute;top:15434;left:11"><nobr>•  Unfortunately, to correct mesh quality errors you will have to remesh the geometry.</nobr></div>
<div style="position:absolute;top:15515;left:1015"><nobr><b>2 </b></nobr></div>
</span></font>

<div style="position:absolute;top:15565;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="20"><b>Page 20</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:15588;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:15680;left:122"><nobr><b>OpenFOAM® mesh quality and checkMesh utility</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:15748;left:11"><nobr>•  If for any reason <b><font color="#558ed5">checkMesh </font></b>finds errors, it will give you a message and it will tell you</nobr></div>
<div style="position:absolute;top:15779;left:44"><nobr>what check failed.</nobr></div>
<div style="position:absolute;top:15842;left:11"><nobr>•  It will also write a set with the faulty cells, faces, and/or points.  These sets are saved</nobr></div>
<div style="position:absolute;top:15874;left:44"><nobr>in the directory <b>constant/polyMesh/sets/</b></nobr></div>
<div style="position:absolute;top:15937;left:11"><nobr>•  If at any point you want to visualize the failed faces/cells/points you will need to</nobr></div>
<div style="position:absolute;top:15970;left:44"><nobr>convert them to VTK format using the utility <b><font color="#558ed5">foamToVTK</font></b>.</nobr></div>
<div style="position:absolute;top:16031;left:11"><nobr>•  At the end, <b><font color="#558ed5">foamToVTK </font></b>will create a directory named <b>VTK</b>, where you will find the</nobr></div>
<div style="position:absolute;top:16064;left:44"><nobr>failed faces/cells/points in VTK format.  At this point you can use <b><font color="#558ed5">paraFoam/</font></b></nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:16098;left:44"><nobr><b>paraview </b><font color="#000000">to visualize the failed sets.</font></nobr></div>
</span></font>

<div style="position:absolute;top:16375;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="21"><b>Page 21</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:16398;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:16490;left:122"><nobr><b>OpenFOAM® mesh quality and checkMesh utility</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:16558;left:11"><nobr>•  I want to emphasize the fact that you will be able to run with mesh quality errors such</nobr></div>
<div style="position:absolute;top:16589;left:44"><nobr>as skewness, aspect ratio, minimum face area, and non-orthogonality.  </nobr></div>
<div style="position:absolute;top:16678;left:11"><nobr>•  However, they will severely tamper the solution accuracy and can made the solver</nobr></div>
<div style="position:absolute;top:16711;left:44"><nobr>explode. </nobr></div>
</span></font>

<div style="position:absolute;top:17185;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="22"><b>Page 22</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:17208;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:17300;left:122"><nobr><b>OpenFOAM® mesh quality and checkMesh utility</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:17368;left:11"><nobr>•  If you want to know the quality metrics hard-wired in OpenFOAM®, just read the file</nobr></div>
<div style="position:absolute;top:17399;left:44"><nobr>$<b>WM_PROJECT_DIR/src/OpenFOAM/meshes/primitiveMesh/</b></nobr></div>
<div style="position:absolute;top:17434;left:44"><nobr><b>primitiveMeshCheck/<font color="#77933c">primitiveMeshCheck.C</font></b>.  Their maximum (or minimum)</nobr></div>
<div style="position:absolute;top:17464;left:44"><nobr>values are defined as follows:</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:19px;font-family:Times;color:#660066">
<div style="position:absolute;top:17538;left:65"><nobr>• </nobr></div>
<div style="position:absolute;top:17540;left:105"><nobr><b>Foam::scalar Foam::primitiveMesh::closedThreshold_  = 1.0e-6;</b></nobr></div>
<div style="position:absolute;top:17576;left:65"><nobr>• </nobr></div>
<div style="position:absolute;top:17577;left:105"><nobr><b>Foam::scalar Foam::primitiveMesh::aspectThreshold_  = 1000;</b></nobr></div>
<div style="position:absolute;top:17613;left:65"><nobr>• </nobr></div>
<div style="position:absolute;top:17615;left:105"><nobr><b>Foam::scalar Foam::primitiveMesh::nonOrthThreshold_ = 70;    // deg</b></nobr></div>
<div style="position:absolute;top:17649;left:65"><nobr>• </nobr></div>
<div style="position:absolute;top:17651;left:105"><nobr><b>Foam::scalar Foam::primitiveMesh::skewThreshold_    = 4;</b></nobr></div>
<div style="position:absolute;top:17687;left:65"><nobr>• </nobr></div>
<div style="position:absolute;top:17688;left:105"><nobr><b>Foam::scalar Foam::primitiveMesh::planarCosAngle_   = 1.0e-6;</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:17755;left:11"><nobr>•  By the way, if you are not happy with these values, you can just change them and</nobr></div>
<div style="position:absolute;top:17788;left:44"><nobr>voila, your quality problems are solved (I am kidding of course). </nobr></div>
</span></font>

<div style="position:absolute;top:17995;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="23"><b>Page 23</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:18018;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:18110;left:90"><nobr><b>OpenFOAM® mesh quality and renumberMesh utility</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:18178;left:11"><nobr>•  Before running a simulation, I highly recommend you to use the <b><font color="#558ed5">renumberMesh</font></b></nobr></div>
<div style="position:absolute;top:18209;left:44"><nobr>utility. This utility will renumber the mesh to minimize its bandwidth, in other words, it</nobr></div>
<div style="position:absolute;top:18242;left:44"><nobr>will make the linear solver run faster (at least for the first time-steps)</nobr></div>
<div style="position:absolute;top:18331;left:11"><nobr>•  Summarizing, before running a simulation remember to always check the mesh</nobr></div>
<div style="position:absolute;top:18364;left:44"><nobr>quality using <b><font color="#558ed5">checkMesh </font></b>and then reduce the mesh bandwidth by using the</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:18397;left:44"><nobr><b>renumberMesh</b>.  <font color="#000000">This is a good standard practice, I always do it (at least for big</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:18428;left:44"><nobr>meshes).</nobr></div>
<div style="position:absolute;top:18520;left:11"><nobr>•  Before running a simulation, try to always get a good quality mesh. Remember,</nobr></div>
<div style="position:absolute;top:18553;left:51"><nobr><b>garbage in – garbage out</b>. Or in a positive way, <b>good mesh – good results</b>.</nobr></div>
<div style="position:absolute;top:18755;left:1015"><nobr><b>3 </b></nobr></div>
</span></font>

<div style="position:absolute;top:18805;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="24"><b>Page 24</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:18828;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:18920;left:361"><nobr><b>Boundary conditions</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:18988;left:11"><nobr>•  Boundary conditions should be physically realistic.  They must represent the physics</nobr></div>
<div style="position:absolute;top:19019;left:51"><nobr>involved.</nobr></div>
<div style="position:absolute;top:19082;left:11"><nobr>•  Minimize grid skewness, non-orthogonality, growth rate, and aspect ratio near the</nobr></div>
<div style="position:absolute;top:19114;left:51"><nobr>boundaries.  You do not want to introduce diffusion errors early in the simulation,</nobr></div>
<div style="position:absolute;top:19147;left:51"><nobr>specially close to the inlets.</nobr></div>
<div style="position:absolute;top:19210;left:11"><nobr>•  Get a <b>good quality mesh </b>at the boundaries.</nobr></div>
<div style="position:absolute;top:19271;left:11"><nobr>•  Remember, for each single variable you are solving you need to specify a boundary</nobr></div>
<div style="position:absolute;top:19304;left:51"><nobr>condition.</nobr></div>
<div style="position:absolute;top:19565;left:1015"><nobr><b>4 </b></nobr></div>
</span></font>

<div style="position:absolute;top:19615;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="25"><b>Page 25</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:19638;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:19730;left:361"><nobr><b>Boundary conditions</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:19798;left:11"><nobr>•  Try to avoid large gradients in the direction normal to the boundaries near inlets and</nobr></div>
<div style="position:absolute;top:19829;left:51"><nobr>outlets.  That is to say, put your boundaries far away from where things are</nobr></div>
<div style="position:absolute;top:19862;left:51"><nobr>happening.</nobr></div>
<div style="position:absolute;top:19924;left:11"><nobr>•  Do not force the flow at the outflow, use a zero normal gradient for all flow variables</nobr></div>
<div style="position:absolute;top:19957;left:51"><nobr>except pressure.  The solver extrapolates the required information from the interior.</nobr></div>
<div style="position:absolute;top:20020;left:11"><nobr>•  Be careful with backward flow at the outlets (flow coming back to the domain) and</nobr></div>
<div style="position:absolute;top:20051;left:51"><nobr>backward flow at inlet (reflection waves), they require special treatment.</nobr></div>
<div style="position:absolute;top:20375;left:1015"><nobr><b>4 </b></nobr></div>
</span></font>

<div style="position:absolute;top:20425;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="26"><b>Page 26</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:20448;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:20540;left:398"><nobr><b>Initial conditions</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:20608;left:11"><nobr>•  First at all,  a good initial condition can improve the stability and convergence rate. On</nobr></div>
<div style="position:absolute;top:20639;left:44"><nobr>the other hand, unphysical boundary conditions can slow down the convergence rate</nobr></div>
<div style="position:absolute;top:20672;left:44"><nobr>or can cause divergence.</nobr></div>
<div style="position:absolute;top:20734;left:11"><nobr>•  As for boundary conditions, for each single variable you are solving you need to</nobr></div>
<div style="position:absolute;top:20767;left:44"><nobr>specify initial conditions.</nobr></div>
<div style="position:absolute;top:20830;left:11"><nobr>•  When it is possible, use <b><font color="#558ed5">potentialFoam </font></b>to get an initial solution.  It is computational</nobr></div>
<div style="position:absolute;top:20861;left:44"><nobr>inexpensive.</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:20924;left:11"><nobr>•  <b>potentialFoam </b><font color="#000000">can also give you an idea of the sensitivity of the mesh quality.</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:21185;left:1015"><nobr><b>5 </b></nobr></div>
</span></font>

<div style="position:absolute;top:21235;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="27"><b>Page 27</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:21258;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:21350;left:398"><nobr><b>Initial conditions</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:21418;left:11"><nobr>•  You can also get a computational inexpensive solution on a coarse mesh and then</nobr></div>
<div style="position:absolute;top:21449;left:44"><nobr>interpolate it to a fine mesh.  This will be a very good initial solution only if the solution</nobr></div>
<div style="position:absolute;top:21482;left:44"><nobr>in the coarse mesh is acceptable.</nobr></div>
<div style="position:absolute;top:21544;left:11"><nobr>•  By the way, do not forget to use a <b>good quality coarse mesh.</b></nobr></div>
<div style="position:absolute;top:21607;left:11"><nobr>•  Use <b><font color="#558ed5">mapFields </font></b>to map the solution from a coarse mesh to a finer mesh.  It also</nobr></div>
<div style="position:absolute;top:21640;left:44"><nobr>works the other way around, but I do not see any reason to proceed in this way. </nobr></div>
<div style="position:absolute;top:21995;left:1015"><nobr><b>5 </b></nobr></div>
</span></font>

<div style="position:absolute;top:22045;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="28"><b>Page 28</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:22068;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:22160;left:398"><nobr><b>Initial conditions</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:22228;left:11"><nobr>•  If you are using a turbulence model, you can initialize the velocity and pressure fields</nobr></div>
<div style="position:absolute;top:22259;left:44"><nobr>from the solution obtained from a laminar case.</nobr></div>
<div style="position:absolute;top:22348;left:11"><nobr>•  If you are running an unsteady simulation and if the initial transient is of no interest,</nobr></div>
<div style="position:absolute;top:22381;left:44"><nobr>you can initialize  your flow using the solution obtained from a steady simulation.</nobr></div>
<div style="position:absolute;top:22469;left:11"><nobr>•  Always try to get initial conditions that are close to the solution (I know this is difficult</nobr></div>
<div style="position:absolute;top:22502;left:44"><nobr>to achieve as we do not know the solution, if we knew the solution we would not have</nobr></div>
<div style="position:absolute;top:22534;left:44"><nobr>a job).</nobr></div>
<div style="position:absolute;top:22624;left:11"><nobr>•  I want to remind you again, initial conditions should be physically realistic. </nobr></div>
</span></font>

<div style="position:absolute;top:22855;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="29"><b>Page 29</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:22878;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:22970;left:254"><nobr><b>Starting and running a simulation</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:23038;left:11"><nobr>•  Remember, you can change the parameters in the dictionaries <b><font color="#77933c">controlDict</font></b>,</nobr></div>
</span></font>
<font color="#77933c" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#77933c">
<div style="position:absolute;top:23071;left:44"><nobr><b>fvSchemes </b><font color="#000000">and </font><b>fvSolution </b><font color="#000000">on the fly. But you will need to set the keyword</font></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:23104;left:44"><nobr><b>runTimeModifiable </b><font color="#000000">to </font><b>yes </b><font color="#000000">in the </font><b><font color="#77933c">controlDict </font></b><font color="#000000">dictionary. </font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:23191;left:11"><nobr>•  When starting a simulation and if the initial transient is of no interest, you can start the</nobr></div>
<div style="position:absolute;top:23224;left:44"><nobr>simulation by using a high value of viscosity (low Reynolds number), and as the</nobr></div>
<div style="position:absolute;top:23255;left:44"><nobr>simulation runs you can change the value until you reach the desired value.  </nobr></div>
<div style="position:absolute;top:23344;left:11"><nobr>•  If you are working with high Reynolds numbers and you do not like the trick of</nobr></div>
<div style="position:absolute;top:23377;left:44"><nobr>increasing the viscosity, you can get a very good initial solution using an Euler solver</nobr></div>
<div style="position:absolute;top:23410;left:44"><nobr>with upwind.</nobr></div>
<div style="position:absolute;top:23498;left:11"><nobr>•  You can also start the simulation by using a first order scheme and then switch to a</nobr></div>
<div style="position:absolute;top:23530;left:44"><nobr>high order scheme. </nobr></div>
</span></font>

<div style="position:absolute;top:23665;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="30"><b>Page 30</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:23688;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:23780;left:254"><nobr><b>Starting and running a simulation</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:23848;left:11"><nobr>•  You can also change the convergence criterion of the linear solvers on the fly.  </nobr></div>
<div style="position:absolute;top:23936;left:11"><nobr>•  For instance, you can start using a not so tight convergence criterion with a robust</nobr></div>
<div style="position:absolute;top:23968;left:44"><nobr>numerical scheme, and as the simulation runs you can tighten the convergence</nobr></div>
<div style="position:absolute;top:24001;left:44"><nobr>criterion to increase the accuracy.</nobr></div>
<div style="position:absolute;top:24089;left:11"><nobr>•  When the simulation starts I usually use more correctors steps (for </nobr></div>
<div style="position:absolute;top:24134;left:11"><nobr>•  and PIMPLE methods), and as the solution advance or stabilizes I decrease the</nobr></div>
<div style="position:absolute;top:24166;left:44"><nobr>number of corrector steps, but I always use at least one corrector step.</nobr></div>
<div style="position:absolute;top:24256;left:11"><nobr>•  Remember to always check the time step continuity errors.  This number should be</nobr></div>
<div style="position:absolute;top:24287;left:44"><nobr>small (negative or positive), if it increases in time for sure something is wrong.</nobr></div>
<div style="position:absolute;top:24376;left:11"><nobr>•  If you want to know how the continuity errors are computed just type in the terminal</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:24411;left:44"><nobr><b>find <font color="#000000">$FOAM_SRC –iname *continuity*</font></b><font color="#000000">, and open any of the files. </font></nobr></div>
</span></font>

<div style="position:absolute;top:24475;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="31"><b>Page 31</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:24498;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:24590;left:341"><nobr><b>Discretization schemes</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:24658;left:11"><nobr>•  Never get a final solution using first order schemes.  They are too diffusive, which</nobr></div>
<div style="position:absolute;top:24689;left:44"><nobr>means they will under predict the forces and smear the gradients.  In the other side,</nobr></div>
<div style="position:absolute;top:24722;left:44"><nobr>first order schemes are extremely robust, so you might be tented to use them as they</nobr></div>
<div style="position:absolute;top:24754;left:44"><nobr>will always give you a solution.</nobr></div>
<div style="position:absolute;top:24844;left:11"><nobr>•  You can start using a first order scheme, and then switch to a high order scheme.</nobr></div>
<div style="position:absolute;top:24875;left:44"><nobr>Remember, you can change the parameters on the fly.</nobr></div>
<div style="position:absolute;top:24964;left:11"><nobr>•  <b>This means, start robustly and end with accuracy.</b></nobr></div>
<div style="position:absolute;top:25054;left:11"><nobr>•  By the way, an accurate numerical scheme needs a <b>good quality mesh</b>.   </nobr></div>
<div style="position:absolute;top:25142;left:11"><nobr>•  Bad quality meshes will add numerical oscillations and reduce the accuracy of the</nobr></div>
<div style="position:absolute;top:25174;left:44"><nobr>numerical solution. </nobr></div>
<div style="position:absolute;top:25235;left:1015"><nobr><b>6 </b></nobr></div>
</span></font>

<div style="position:absolute;top:25285;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="32"><b>Page 32</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:25308;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:25400;left:341"><nobr><b>Discretization schemes</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:25468;left:11"><nobr>•  If you have a <b>good mesh and a good initial solution</b>, you can start immediately with</nobr></div>
<div style="position:absolute;top:25499;left:44"><nobr>a high order scheme, but be careful, remember to always check the stability of the</nobr></div>
<div style="position:absolute;top:25532;left:44"><nobr>solution.</nobr></div>
<div style="position:absolute;top:25621;left:11"><nobr>•  If at one point your solution starts to oscillate, you can switch to upwind and let the</nobr></div>
<div style="position:absolute;top:25654;left:44"><nobr>simulation stabilize, then you can switch back to high order accuracy.  </nobr></div>
<div style="position:absolute;top:25742;left:11"><nobr>•  Have in mind  that this behavior is telling you that something is happening so you</nobr></div>
<div style="position:absolute;top:25774;left:44"><nobr>better adjust other parameters, such as, solver tolerances, non-orthogonal</nobr></div>
<div style="position:absolute;top:25807;left:44"><nobr>corrections, number of correctors, gradient discretization and so on.</nobr></div>
<div style="position:absolute;top:25895;left:11"><nobr>•  <b>Try to always use a good quality mesh. Avoid the GIGO syndrome.</b></nobr></div>
<div style="position:absolute;top:25984;left:11"><nobr>•  In the next slides I will show you how I usually setup the discretization schemes.</nobr></div>
<div style="position:absolute;top:26045;left:1015"><nobr><b>7 </b></nobr></div>
</span></font>

<div style="position:absolute;top:26095;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="33"><b>Page 33</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:26118;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:26210;left:171"><nobr><b>Discretization schemes – Convective terms</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:26278;left:11"><nobr>•  A robust numerical scheme but too diffusive,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:26352;left:45"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:26396;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:26441;left:99"><nobr><b>div(phi,U)    </b></nobr></div>
<div style="position:absolute;top:26441;left:585"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:26484;left:99"><nobr><b>div(phi,omega)    </b></nobr></div>
<div style="position:absolute;top:26484;left:585"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:26529;left:94"><nobr><b>div(phi,k)    </b></nobr></div>
<div style="position:absolute;top:26529;left:585"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:26574;left:94"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:26618;left:45"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:26905;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="34"><b>Page 34</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:26928;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:27088;left:11"><nobr>•  An accurate and stable numerical scheme,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:27162;left:45"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:27206;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:27251;left:99"><nobr><b>div(phi,U)    </b></nobr></div>
<div style="position:absolute;top:27251;left:585"><nobr><b>Gauss linearUpwind grad(U);</b></nobr></div>
<div style="position:absolute;top:27294;left:99"><nobr><b>div(phi,omega)    </b></nobr></div>
<div style="position:absolute;top:27294;left:585"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:27339;left:94"><nobr><b>div(phi,k)    </b></nobr></div>
<div style="position:absolute;top:27339;left:585"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:27384;left:94"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:27428;left:45"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:27020;left:171"><nobr><b>Discretization schemes – Convective terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:27715;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="35"><b>Page 35</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:27738;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:27898;left:11"><nobr>•  An even more accurate but oscillatory scheme,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:27972;left:45"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:28016;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:28061;left:99"><nobr><b>div(phi,U)    </b></nobr></div>
<div style="position:absolute;top:28061;left:585"><nobr><b>Gauss linear;</b></nobr></div>
<div style="position:absolute;top:28104;left:99"><nobr><b>div(phi,omega)    </b></nobr></div>
<div style="position:absolute;top:28104;left:585"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:28149;left:94"><nobr><b>div(phi,k)    </b></nobr></div>
<div style="position:absolute;top:28149;left:585"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:28194;left:94"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:28238;left:45"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:27830;left:171"><nobr><b>Discretization schemes – Convective terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:28525;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="36"><b>Page 36</b></a></font></td></tr></tbody></table></div><font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:29053;left:139"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:29084;left:139"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:29117;left:203"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:29117;left:446"><nobr><b>Gauss linear limited    ;</b></nobr></div>
<div style="position:absolute;top:29149;left:139"><nobr><b>}</b></nobr></div>
</span></font>
<font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:28548;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:28698;left:11"><nobr>•  For the discretization of the diffusive terms, you can use a fully orthogonal scheme, </nobr></div>
<div style="position:absolute;top:28964;left:11"><nobr>•  You can also use a scheme that uses a blending between a fully orthogonal scheme</nobr></div>
<div style="position:absolute;top:28997;left:44"><nobr>and a non-orthogonal scheme,</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:28640;left:191"><nobr><b>Discretization schemes – Diffusive terms</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:28760;left:139"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:28791;left:139"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:28824;left:203"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:28824;left:446"><nobr><b>Gauss linear corrected;</b></nobr></div>
<div style="position:absolute;top:28856;left:139"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:29335;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="37"><b>Page 37</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:29358;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:29508;left:11"><nobr>•  The method you use highly depends on the quality of the mesh. </nobr></div>
<div style="position:absolute;top:29552;left:11"><nobr>•  For meshes with low non-orthogonality you can use the <b><font color="#660066">corrected </font></b>scheme or the</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:29587;left:44"><nobr><b>limited 1 </b><font color="#000000">scheme.</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:29628;left:11"><nobr>•  For meshes with high non-orthogonality  you can use the <b><font color="#660066">limited    </font></b>scheme. </nobr></div>
<div style="position:absolute;top:29661;left:44"><nobr>The higher the non-orthogonality the lower the value of the blending factor     .</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:29450;left:191"><nobr><b>Discretization schemes – Diffusive terms</b></nobr></div>
</span></font>
<font face="Times" size="8"><span style="font-size:64px;font-family:Times">
<div style="position:absolute;top:29888;left:64"><nobr>0</nobr></div>
<div style="position:absolute;top:29888;left:963"><nobr>1</nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:29999;left:610"><nobr>•  Good quality mesh</nobr></div>
<div style="position:absolute;top:30031;left:610"><nobr>•  Orthogonal correction</nobr></div>
<div style="position:absolute;top:30064;left:610"><nobr>•  Unbounded on low quality meshes</nobr></div>
<div style="position:absolute;top:29999;left:13"><nobr>•  Bad quality mesh</nobr></div>
<div style="position:absolute;top:30031;left:13"><nobr>•  Non-orthogonal correction</nobr></div>
<div style="position:absolute;top:30064;left:13"><nobr>•  Bounded on low quality meshes</nobr></div>
</span></font>

<div style="position:absolute;top:30145;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="38"><b>Page 38</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:30168;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:30328;left:11"><nobr>•  An accurate numerical scheme on orthogonal meshes (<b>this is a very good quality</b></nobr></div>
<div style="position:absolute;top:30359;left:44"><nobr><b>mesh with uniform cell size</b>, this is what we want),</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:30419;left:45"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:30462;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:30507;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:30507;left:413"><nobr><b>Gauss linear orthogonal;</b></nobr></div>
<div style="position:absolute;top:30551;left:45"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:30641;left:45"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:30684;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:30729;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:30729;left:413"><nobr><b>orthogonal;</b></nobr></div>
<div style="position:absolute;top:30773;left:45"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:30260;left:191"><nobr><b>Discretization schemes – Diffusive terms</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:30905;left:1015"><nobr><b>8 </b></nobr></div>
</span></font>

<div style="position:absolute;top:30955;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="39"><b>Page 39</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:30978;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:31138;left:11"><nobr>•  An accurate numerical scheme on orthogonal meshes (with non-orthogonal</nobr></div>
<div style="position:absolute;top:31169;left:44"><nobr>corrections),</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:31229;left:45"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:31272;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:31317;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:31317;left:413"><nobr><b>Gauss linear limited 1;</b></nobr></div>
<div style="position:absolute;top:31361;left:45"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:31451;left:45"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:31494;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:31539;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:31539;left:413"><nobr><b>limited 1;</b></nobr></div>
<div style="position:absolute;top:31583;left:45"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:31070;left:191"><nobr><b>Discretization schemes – Diffusive terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:31765;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="40"><b>Page 40</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:31788;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:31948;left:11"><nobr>•  A less accurate numerical scheme valid on non-orthogonal meshes (with non-</nobr></div>
<div style="position:absolute;top:31979;left:44"><nobr>orthogonal corrections),</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:32039;left:45"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:32082;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:32127;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:32127;left:413"><nobr><b>Gauss linear limited 0.5;</b></nobr></div>
<div style="position:absolute;top:32171;left:45"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:32261;left:45"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:32304;left:45"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:32349;left:153"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:32349;left:413"><nobr><b>limited 0.5;</b></nobr></div>
<div style="position:absolute;top:32393;left:45"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:31880;left:191"><nobr><b>Discretization schemes – Diffusive terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:32575;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="41"><b>Page 41</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:32598;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:32748;left:11"><nobr>•  Let us talk about the <b><font color="#660066">gradSchemes</font></b>, this entry defines the way we compute the</nobr></div>
<div style="position:absolute;top:32780;left:44"><nobr>gradients.  </nobr></div>
<div style="position:absolute;top:32868;left:11"><nobr>•  The gradients can be computed using the Gauss method or the least squares</nobr></div>
<div style="position:absolute;top:32901;left:44"><nobr>method. The keywords are:</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:32946;left:173"><nobr>•  <b>Gauss linear;</b></nobr></div>
<div style="position:absolute;top:32990;left:173"><nobr>•  <b>leastSquares;</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:33078;left:11"><nobr>•  In practice, the <b><font color="#660066">leastSquares </font></b>method is more accurate, however, I have found that</nobr></div>
<div style="position:absolute;top:33111;left:44"><nobr>it tends to be more oscillatory on tetrahedral meshes.  </nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:32690;left:193"><nobr><b>Discretization schemes – Gradient terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:33385;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="42"><b>Page 42</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:33408;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:33558;left:11"><nobr>•  You can also use gradient limiters.</nobr></div>
<div style="position:absolute;top:33602;left:11"><nobr>•  Gradient limiters will avoid over and under shoots on the gradient computations. </nobr></div>
<div style="position:absolute;top:33635;left:44"><nobr>There are four available,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:33739;left:119"><nobr><b>cellMDLimited</b></nobr></div>
</span></font>
<font color="#4f81bd" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#4f81bd">
<div style="position:absolute;top:33737;left:551"><nobr><b>Less diffusive</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:33787;left:119"><nobr><b>cellLimited</b></nobr></div>
<div style="position:absolute;top:33836;left:119"><nobr><b>faceMDLimited</b></nobr></div>
<div style="position:absolute;top:33884;left:119"><nobr><b>faceLimited</b></nobr></div>
</span></font>
<font color="#c0504d" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#c0504d">
<div style="position:absolute;top:33882;left:551"><nobr><b>More diffusive</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:34019;left:11"><nobr>•  The following entry corresponds to the <b><font color="#660066">leastSquares </font></b>method using gradient</nobr></div>
<div style="position:absolute;top:34050;left:44"><nobr>limiters</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:34097;left:119"><nobr><b>cellMDLimited leastSquares 1.0;</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:33500;left:193"><nobr><b>Discretization schemes – Gradient terms </b></nobr></div>
</span></font>

<div style="position:absolute;top:34195;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="43"><b>Page 43</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:34218;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:34368;left:11"><nobr>•  Gradient limiters avoid over and under shoots on the gradient computations.  </nobr></div>
<div style="position:absolute;top:34412;left:11"><nobr>•  The gradient limiter implementation in OpenFOAM®, uses a blending factor     . </nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:34310;left:193"><nobr><b>Discretization schemes – Gradient terms</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:34477;left:135"><nobr><b>gradSchemes</b></nobr></div>
<div style="position:absolute;top:34508;left:135"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:34541;left:199"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:34541;left:442"><nobr><b>cellMDLimited Gauss linear    ;</b></nobr></div>
<div style="position:absolute;top:34573;left:135"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="8"><span style="font-size:64px;font-family:Times">
<div style="position:absolute;top:34794;left:70"><nobr>0</nobr></div>
<div style="position:absolute;top:34794;left:968"><nobr>1</nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:34906;left:810"><nobr>Stability</nobr></div>
<div style="position:absolute;top:34937;left:810"><nobr>Limiter <font color="#008000">on</font></nobr></div>
<div style="position:absolute;top:34909;left:144"><nobr>Accuracy</nobr></div>
<div style="position:absolute;top:34940;left:144"><nobr>Limiter <font color="#ff0000">off </font></nobr></div>
</span></font>

<div style="position:absolute;top:35005;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="44"><b>Page 44</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:35028;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:35120;left:79"><nobr><b>Discretization schemes – How to choose the schemes</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:35188;left:11"><nobr>•  If after checking the mesh quality, the non-orthogonality is higher than 80, I prefer to</nobr></div>
<div style="position:absolute;top:35219;left:44"><nobr>redo the mesh and improve the quality.</nobr></div>
<div style="position:absolute;top:35308;left:11"><nobr>•  By the way, if you are running LES simulations, do not even think about running in</nobr></div>
<div style="position:absolute;top:35341;left:44"><nobr>highly non-orthogonal meshes.  Better spend more time in getting a <b>good quality</b></nobr></div>
<div style="position:absolute;top:35374;left:44"><nobr><b>mesh</b>, maybe with non-orthogonality less than 60.</nobr></div>
<div style="position:absolute;top:35462;left:11"><nobr>•  Do not try to push too much the numerical scheme on highly non-orthogonal meshes. </nobr></div>
<div style="position:absolute;top:35494;left:44"><nobr>You already know that the quality is low, so this highly influence the accuracy and</nobr></div>
<div style="position:absolute;top:35527;left:44"><nobr>stability of the solution. Specially the gradient computations.</nobr></div>
<div style="position:absolute;top:35615;left:11"><nobr>•  I do not like to run simulations on highly orthogonal meshes, but if I have to, I often</nobr></div>
<div style="position:absolute;top:35648;left:44"><nobr>use the following numerical scheme.</nobr></div>
<div style="position:absolute;top:35765;left:1015"><nobr><b>9 </b></nobr></div>
</span></font>

<div style="position:absolute;top:35815;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="45"><b>Page 45</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:35838;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:35998;left:11"><nobr>•  Non-orthogonality more than 80. I do not waste my time. I prefer to go back and get a</nobr></div>
<div style="position:absolute;top:36029;left:44"><nobr>better mesh.  But if you want, you can try something like this,</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:16px;font-family:Times;color:#660066">
<div style="position:absolute;top:36115;left:11"><nobr><b>gradSchemes</b></nobr></div>
<div style="position:absolute;top:36148;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36181;left:65"><nobr><b>default faceLimited leastSquares 1.0;</b></nobr></div>
<div style="position:absolute;top:36216;left:65"><nobr><b>grad(U) faceLimited leastSquares 1.0;</b></nobr></div>
<div style="position:absolute;top:36249;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:36283;left:11"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:36316;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36349;left:65"><nobr><b>div(phi,U)</b></nobr></div>
<div style="position:absolute;top:36349;left:281"><nobr><b>Gauss linearUpwind grad(U);</b></nobr></div>
<div style="position:absolute;top:36384;left:65"><nobr><b>div(phi,omega)</b></nobr></div>
<div style="position:absolute;top:36384;left:281"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:36417;left:65"><nobr><b>div(phi,k)</b></nobr></div>
<div style="position:absolute;top:36417;left:281"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:36450;left:65"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:36484;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:36115;left:626"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:36148;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36181;left:691"><nobr><b>default Gauss linear limited 0.333;</b></nobr></div>
<div style="position:absolute;top:36216;left:626"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:36283;left:626"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:36316;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36349;left:680"><nobr><b>default limited 0.333;</b></nobr></div>
<div style="position:absolute;top:36384;left:626"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:35930;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:36625;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="46"><b>Page 46</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:36648;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:36808;left:11"><nobr>•  Non-orthogonality between 70 and 80</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:16px;font-family:Times;color:#660066">
<div style="position:absolute;top:36876;left:11"><nobr><b>gradSchemes</b></nobr></div>
<div style="position:absolute;top:36909;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36942;left:65"><nobr><b>default cellLimited leastSquares 1.0;</b></nobr></div>
<div style="position:absolute;top:36977;left:65"><nobr><b>grad(U) cellLimited leastSquares 1.0;</b></nobr></div>
<div style="position:absolute;top:37010;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:37044;left:11"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:37077;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37110;left:65"><nobr><b>div(phi,U)</b></nobr></div>
<div style="position:absolute;top:37110;left:281"><nobr><b>Gauss linearUpwind grad(U);</b></nobr></div>
<div style="position:absolute;top:37145;left:65"><nobr><b>div(phi,omega)</b></nobr></div>
<div style="position:absolute;top:37145;left:281"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:37178;left:65"><nobr><b>div(phi,k)</b></nobr></div>
<div style="position:absolute;top:37178;left:281"><nobr><b>Gauss upwind;</b></nobr></div>
<div style="position:absolute;top:37211;left:65"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:37245;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:36876;left:626"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:36909;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:36942;left:680"><nobr><b>default Gauss linear limited 0.5;</b></nobr></div>
<div style="position:absolute;top:36977;left:626"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:37044;left:626"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:37077;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37110;left:680"><nobr><b>default limited 0.5;</b></nobr></div>
<div style="position:absolute;top:37145;left:626"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:36740;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:37435;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="47"><b>Page 47</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:37458;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:37618;left:11"><nobr>•  Non-orthogonality between 60 and 70</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:16px;font-family:Times;color:#660066">
<div style="position:absolute;top:37686;left:11"><nobr><b>gradSchemes</b></nobr></div>
<div style="position:absolute;top:37719;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37752;left:65"><nobr><b>default cellMDLimited Gauss linear 0.5;</b></nobr></div>
<div style="position:absolute;top:37787;left:65"><nobr><b>grad(U) cellMDLimited Gauss linear 0.5;</b></nobr></div>
<div style="position:absolute;top:37820;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:37854;left:11"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:37887;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37920;left:65"><nobr><b>div(phi,U)</b></nobr></div>
<div style="position:absolute;top:37920;left:281"><nobr><b>Gauss linearUpwind grad(U);</b></nobr></div>
<div style="position:absolute;top:37955;left:65"><nobr><b>div(phi,omega)</b></nobr></div>
<div style="position:absolute;top:37955;left:281"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:37988;left:65"><nobr><b>div(phi,k)</b></nobr></div>
<div style="position:absolute;top:37988;left:281"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:38021;left:65"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:38055;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:37686;left:626"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:37719;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37752;left:680"><nobr><b>default Gauss linear limited 0.777;</b></nobr></div>
<div style="position:absolute;top:37787;left:626"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:37854;left:626"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:37887;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:37920;left:680"><nobr><b>default limited 0.777;</b></nobr></div>
<div style="position:absolute;top:37955;left:626"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:37550;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:38245;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="48"><b>Page 48</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:38268;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:38428;left:11"><nobr>•  Non-orthogonality between 40 and 60</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:16px;font-family:Times;color:#660066">
<div style="position:absolute;top:38496;left:11"><nobr><b>gradSchemes</b></nobr></div>
<div style="position:absolute;top:38529;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:38562;left:65"><nobr><b>default cellMDLimited Gauss linear 0.5;</b></nobr></div>
<div style="position:absolute;top:38597;left:65"><nobr><b>grad(U) cellMDLimited Gauss linear 0.5;</b></nobr></div>
<div style="position:absolute;top:38630;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:38664;left:11"><nobr><b>divSchemes</b></nobr></div>
<div style="position:absolute;top:38697;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:38730;left:65"><nobr><b>div(phi,U)</b></nobr></div>
<div style="position:absolute;top:38730;left:281"><nobr><b>Gauss linearUpwind grad(U);</b></nobr></div>
<div style="position:absolute;top:38765;left:65"><nobr><b>div(phi,omega)</b></nobr></div>
<div style="position:absolute;top:38765;left:281"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:38798;left:65"><nobr><b>div(phi,k)</b></nobr></div>
<div style="position:absolute;top:38798;left:281"><nobr><b>Gauss linearUpwind default;</b></nobr></div>
<div style="position:absolute;top:38831;left:65"><nobr><b>div((nuEff*dev(T(grad(U)))))  Gauss linear;</b></nobr></div>
<div style="position:absolute;top:38865;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:38496;left:626"><nobr><b>laplacianSchemes</b></nobr></div>
<div style="position:absolute;top:38529;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:38562;left:680"><nobr><b>default Gauss linear limited 1.0;</b></nobr></div>
<div style="position:absolute;top:38597;left:626"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:38664;left:626"><nobr><b>snGradSchemes</b></nobr></div>
<div style="position:absolute;top:38697;left:626"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:38730;left:680"><nobr><b>default limited 1.0;</b></nobr></div>
<div style="position:absolute;top:38765;left:626"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:38360;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:39055;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="49"><b>Page 49</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:39078;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:39238;left:11"><nobr>•  I guess at this point you know how to adjust the numerical scheme for meshes with</nobr></div>
<div style="position:absolute;top:39269;left:44"><nobr>non-orthogonality less than 40.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:39170;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:39865;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="50"><b>Page 50</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:39888;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:40048;left:11"><nobr>•  Additionally, I also change the number of non-orthogonal corrections.</nobr></div>
<div style="position:absolute;top:40136;left:119"><nobr>•  Non-orthogonality between 70 and 80:</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:40182;left:173"><nobr><b>nNonOrthogonalCorrectors 3;</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:40270;left:119"><nobr>•  Non-orthogonality between 50 and 70:</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:40315;left:173"><nobr><b>nNonOrthogonalCorrectors 2;</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:40402;left:119"><nobr>•  Non-orthogonality less than 50:</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:40449;left:173"><nobr><b>nNonOrthogonalCorrectors 1;</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:40580;left:11"><nobr>•  I always like to do at least one correction.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:39980;left:79"><nobr><b>Discretization schemes – How to choose the schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:40675;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="51"><b>Page 51</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:40698;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:40790;left:333"><nobr><b>Under-relaxation factors</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:40858;left:11"><nobr>•  Because of the non-linearity of the equations being solved, it is necessary to control</nobr></div>
<div style="position:absolute;top:40889;left:44"><nobr>the change of     .  This is achieved by under-relaxation as follows, </nobr></div>
<div style="position:absolute;top:41023;left:65"><nobr>here     is the relaxation factor, </nobr></div>
<div style="position:absolute;top:41333;left:11"><nobr>•  In plain English, this means that the new value of the variable     depends upon the</nobr></div>
<div style="position:absolute;top:41366;left:44"><nobr>old value, the computed change of     , and the under-relaxation factor     .</nobr></div>
<div style="position:absolute;top:41070;left:257"><nobr>Means under-relaxation.  This will slow down the convergence </nobr></div>
<div style="position:absolute;top:41102;left:257"><nobr>rate but increases the stability.</nobr></div>
<div style="position:absolute;top:41148;left:257"><nobr>Means no relaxation at all.  We simple use the predicted value of    . </nobr></div>
<div style="position:absolute;top:41205;left:257"><nobr>Means over-relaxation.  It can sometimes be used to accelerate </nobr></div>
<div style="position:absolute;top:41237;left:257"><nobr>convergence rate but will decrease the stability.</nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:51px;font-family:Times">
<div style="position:absolute;top:40949;left:233"><nobr>φ</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:35px;font-family:Times">
<div style="position:absolute;top:40939;left:265"><nobr>n</nobr></div>
<div style="position:absolute;top:40975;left:265"><nobr>P</nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:51px;font-family:Times">
<div style="position:absolute;top:40949;left:316"><nobr>= φ<font style="font-size:35px">n1</font></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:35px;font-family:Times">
<div style="position:absolute;top:40977;left:405"><nobr>P</nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:51px;font-family:Times">
<div style="position:absolute;top:40949;left:501"><nobr>+ α(φ</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:35px;font-family:Times">
<div style="position:absolute;top:40939;left:643"><nobr>n<font style="font-size:24px">⇤</font></nobr></div>
<div style="position:absolute;top:40975;left:643"><nobr>P <font style="font-size:51px">- φ</font></nobr></div>
<div style="position:absolute;top:40939;left:792"><nobr>n1</nobr></div>
<div style="position:absolute;top:40977;left:792"><nobr>P</nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:51px;font-family:Times">
<div style="position:absolute;top:40949;left:877"><nobr>)</nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:41px;font-family:Times">
<div style="position:absolute;top:40883;left:225"><nobr>φ</nobr></div>
<div style="position:absolute;top:41139;left:1038"><nobr>φ</nobr></div>
<div style="position:absolute;top:41326;left:783"><nobr>φ</nobr></div>
<div style="position:absolute;top:41359;left:467"><nobr>φ</nobr></div>
<div style="position:absolute;top:41359;left:889"><nobr>α</nobr></div>
<div style="position:absolute;top:41014;left:127"><nobr>α</nobr></div>
<div style="position:absolute;top:41082;left:120"><nobr>α &lt; 1</nobr></div>
<div style="position:absolute;top:41143;left:120"><nobr>α = 1</nobr></div>
<div style="position:absolute;top:41218;left:120"><nobr>α &gt; 1</nobr></div>
</span></font>

<div style="position:absolute;top:41485;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="52"><b>Page 52</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:41508;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:41600;left:333"><nobr><b>Under-relaxation factors</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:41668;left:11"><nobr>•  Under-relaxation factors  are typical of steady solvers using the SIMPLE method.</nobr></div>
<div style="position:absolute;top:41756;left:11"><nobr>•  To find out what are and how to change the under-relaxation factors requires</nobr></div>
<div style="position:absolute;top:41788;left:44"><nobr>experience and understanding.</nobr></div>
<div style="position:absolute;top:41878;left:11"><nobr>•  In general, under-relaxation factors are there to suppress oscillations.</nobr></div>
<div style="position:absolute;top:41966;left:11"><nobr>•  Small under-relaxation factors will significantly slow down convergence.  Sometimes</nobr></div>
<div style="position:absolute;top:41998;left:44"><nobr>to the extent that the user thinks the solution is converged when it really is not.</nobr></div>
<div style="position:absolute;top:42088;left:11"><nobr>•  The recommendation is to always use under-relaxation factors that are as high as</nobr></div>
<div style="position:absolute;top:42119;left:44"><nobr>possible, without resulting in oscillations or divergence. </nobr></div>
</span></font>

<div style="position:absolute;top:42295;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="53"><b>Page 53</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:42318;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:42410;left:333"><nobr><b>Under-relaxation factors</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:42478;left:11"><nobr>•  I highly recommend you to use the default under-relaxation factors.</nobr></div>
<div style="position:absolute;top:42566;left:11"><nobr>•  If you have to change the under-relaxation factors, start by decreasing the values of</nobr></div>
<div style="position:absolute;top:42598;left:44"><nobr>the under-relaxation factors in order to improve the stability of the solution.</nobr></div>
<div style="position:absolute;top:42688;left:11"><nobr>•  Remember, low under-relaxation factors will slow down the solver while high under-</nobr></div>
<div style="position:absolute;top:42719;left:44"><nobr>relaxation factors will speed up the computation, but you will give up stability.</nobr></div>
<div style="position:absolute;top:42808;left:11"><nobr>•  In order to find the optimal under-relaxation factors for your case, it will take some trial</nobr></div>
<div style="position:absolute;top:42841;left:44"><nobr>and error. </nobr></div>
</span></font>

<div style="position:absolute;top:43105;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="54"><b>Page 54</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:43128;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:43220;left:333"><nobr><b>Under-relaxation factors</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:43288;left:11"><nobr>•  These are the under-relaxation factors I often use (which by the way are the</nobr></div>
<div style="position:absolute;top:43319;left:44"><nobr>commonly used).</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:43410;left:119"><nobr><b>relaxationFactors</b></nobr></div>
<div style="position:absolute;top:43455;left:119"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:43500;left:173"><nobr><b>p    </b></nobr></div>
<div style="position:absolute;top:43500;left:367"><nobr><b>0.3;</b></nobr></div>
<div style="position:absolute;top:43543;left:173"><nobr><b>U    </b></nobr></div>
<div style="position:absolute;top:43543;left:367"><nobr><b>0.7;</b></nobr></div>
<div style="position:absolute;top:43588;left:173"><nobr><b>k    </b></nobr></div>
<div style="position:absolute;top:43588;left:367"><nobr><b>0.7;</b></nobr></div>
<div style="position:absolute;top:43632;left:173"><nobr><b>omega     0.7;</b></nobr></div>
<div style="position:absolute;top:43677;left:119"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:43763;left:11"><nobr>•  According to the physics involved you will need to add more under-relaxation factors.</nobr></div>
<div style="position:absolute;top:43808;left:11"><nobr>•  If you do not define the new under-relaxation factors, they will be set to 1.0 by default. </nobr></div>
</span></font>

<div style="position:absolute;top:43915;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="55"><b>Page 55</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:43938;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="8"><span style="font-size:64px;font-family:Times">
<div style="position:absolute;top:44208;left:108"><nobr>0</nobr></div>
<div style="position:absolute;top:44208;left:998"><nobr>1</nobr></div>
</span></font>
<font color="#660066" face="Times" size="5"><span style="font-size:34px;font-family:Times;color:#660066">
<div style="position:absolute;top:44162;left:388"><nobr><b>relaxationFactors</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:44030;left:333"><nobr><b>Under-relaxation factors</b></nobr></div>
<div style="position:absolute;top:44593;left:25"><nobr>Stability</nobr></div>
<div style="position:absolute;top:44404;left:24"><nobr>Velocity </nobr></div>
</span></font>

<div style="position:absolute;top:44725;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="56"><b>Page 56</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:44748;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:44840;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:44906;left:11"><nobr>•  The linear solvers are defined in the <b><font color="#77933c">fvSolution </font></b>dictionary.  You will need to define</nobr></div>
<div style="position:absolute;top:44937;left:44"><nobr>a solver for each variable you are solving.</nobr></div>
<div style="position:absolute;top:45026;left:11"><nobr>•  The solvers can be modified on the fly.</nobr></div>
<div style="position:absolute;top:45116;left:11"><nobr>•  The GAMG solver (generalized geometric-algebraic multigrid solver), can often be the</nobr></div>
<div style="position:absolute;top:45147;left:44"><nobr>optimal choice for solving the pressure equation. However, I have found that when</nobr></div>
<div style="position:absolute;top:45180;left:44"><nobr>using more than 1024 processors is better to use Newton-Krylov type solvers. </nobr></div>
</span></font>

<div style="position:absolute;top:45535;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="57"><b>Page 57</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:45558;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:45650;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:45716;left:11"><nobr>•  When solving multiphase problems, I have found that the GAMG solver might give</nobr></div>
<div style="position:absolute;top:45747;left:44"><nobr>problems when running in parallel, so be careful.  The problem is mainly related to</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:45782;left:44"><nobr><b>nCoarsestCells </b><font color="#000000">keyword, so usually I have to set a high value of cells (in the order</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:45812;left:44"><nobr>1000).</nobr></div>
<div style="position:absolute;top:45902;left:11"><nobr>•  The utility <b><font color="#558ed5">renumberMesh </font></b>can dramatically increase the speed of the linear solvers,</nobr></div>
<div style="position:absolute;top:45933;left:44"><nobr>specially during the firsts iterations.</nobr></div>
<div style="position:absolute;top:46022;left:11"><nobr>•  I usually start by using a not so tight convergence criterion and as the simulation runs,</nobr></div>
<div style="position:absolute;top:46055;left:44"><nobr>I tight the convergence criterion. </nobr></div>
</span></font>

<div style="position:absolute;top:46345;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="58"><b>Page 58</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:46368;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:46460;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:46526;left:11"><nobr>•  These are the linear solvers I often use.</nobr></div>
<div style="position:absolute;top:46569;left:11"><nobr>•  For the pressure equation I usually start with a tolerance equal to 1e-5 and relTol</nobr></div>
<div style="position:absolute;top:46602;left:44"><nobr>equal to 0.01.  After a while I change these values to 1e-6 and 0.001 respectively.</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:46679;left:136"><nobr><b>p</b></nobr></div>
<div style="position:absolute;top:46711;left:136"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:46744;left:234"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:46744;left:698"><nobr><b>GAMG;</b></nobr></div>
<div style="position:absolute;top:46775;left:234"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:46775;left:698"><nobr><b>1e-5;</b></nobr></div>
<div style="position:absolute;top:46808;left:234"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:46808;left:698"><nobr><b>0.01;</b></nobr></div>
<div style="position:absolute;top:46840;left:234"><nobr><b>smoother    </b></nobr></div>
<div style="position:absolute;top:46840;left:698"><nobr><b>GaussSeidel;</b></nobr></div>
<div style="position:absolute;top:46873;left:234"><nobr><b>nPreSweeps    </b></nobr></div>
<div style="position:absolute;top:46873;left:698"><nobr><b>0;</b></nobr></div>
<div style="position:absolute;top:46906;left:234"><nobr><b>nPostSweeps    </b></nobr></div>
<div style="position:absolute;top:46906;left:698"><nobr><b>2;</b></nobr></div>
<div style="position:absolute;top:46937;left:234"><nobr><b>cacheAgglomeration    on;</b></nobr></div>
<div style="position:absolute;top:46970;left:234"><nobr><b>agglomerator    </b></nobr></div>
<div style="position:absolute;top:46970;left:698"><nobr><b>faceAreaPair;</b></nobr></div>
<div style="position:absolute;top:47003;left:234"><nobr><b>nCellsInCoarsestLevel   1000;</b></nobr></div>
<div style="position:absolute;top:47035;left:234"><nobr><b>mergeLevels    </b></nobr></div>
<div style="position:absolute;top:47035;left:698"><nobr><b>1;</b></nobr></div>
<div style="position:absolute;top:47068;left:136"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:47155;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="59"><b>Page 59</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:47178;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:47270;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:47336;left:11"><nobr>•  These are the linear solvers I often use.</nobr></div>
<div style="position:absolute;top:47379;left:11"><nobr>•  For the pressure equation I usually start with a tolerance equal to 1e-5 and relTol</nobr></div>
<div style="position:absolute;top:47412;left:44"><nobr>equal to 0.01.  After a while I change these values to 1e-6 and 0.001 respectively.</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:47489;left:136"><nobr><b>p</b></nobr></div>
<div style="position:absolute;top:47521;left:136"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:47554;left:234"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:47554;left:698"><nobr><b>GAMG;</b></nobr></div>
<div style="position:absolute;top:47585;left:234"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:47585;left:698"><nobr><b>1e-6;</b></nobr></div>
<div style="position:absolute;top:47618;left:234"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:47618;left:698"><nobr><b>0.001;</b></nobr></div>
<div style="position:absolute;top:47650;left:234"><nobr><b>smoother    </b></nobr></div>
<div style="position:absolute;top:47650;left:698"><nobr><b>GaussSeidel;</b></nobr></div>
<div style="position:absolute;top:47683;left:234"><nobr><b>nPreSweeps    </b></nobr></div>
<div style="position:absolute;top:47683;left:698"><nobr><b>0;</b></nobr></div>
<div style="position:absolute;top:47716;left:234"><nobr><b>nPostSweeps    </b></nobr></div>
<div style="position:absolute;top:47716;left:698"><nobr><b>2;</b></nobr></div>
<div style="position:absolute;top:47747;left:234"><nobr><b>cacheAgglomeration    on;</b></nobr></div>
<div style="position:absolute;top:47780;left:234"><nobr><b>agglomerator    </b></nobr></div>
<div style="position:absolute;top:47780;left:698"><nobr><b>faceAreaPair;</b></nobr></div>
<div style="position:absolute;top:47813;left:234"><nobr><b>nCellsInCoarsestLevel   1000;</b></nobr></div>
<div style="position:absolute;top:47845;left:234"><nobr><b>mergeLevels    </b></nobr></div>
<div style="position:absolute;top:47845;left:698"><nobr><b>1;</b></nobr></div>
<div style="position:absolute;top:47878;left:136"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:47965;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="60"><b>Page 60</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:47988;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:48080;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:48146;left:11"><nobr>•  These are the linear solvers I often use.</nobr></div>
<div style="position:absolute;top:48189;left:11"><nobr>•  If I do not use the GAMG solver for the pressure, I often use the PCG solver.</nobr></div>
<div style="position:absolute;top:48234;left:11"><nobr>•  For the pressure equation I usually start with a tolerance equal to 1e-5 and relTol</nobr></div>
<div style="position:absolute;top:48266;left:44"><nobr>equal to 0.01.  After a while I change these values to 1e-6 and 0.001 respectively.</nobr></div>
<div style="position:absolute;top:48311;left:11"><nobr>•  If the speed of the solver is too slow, I change the convergence criteria to 1e-4 and</nobr></div>
<div style="position:absolute;top:48344;left:44"><nobr>relTol equal to 0.05.   I usually do this during the first iterations.</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:48455;left:143"><nobr><b>p</b></nobr></div>
<div style="position:absolute;top:48486;left:143"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:48519;left:208"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:48519;left:629"><nobr><b>PCG;</b></nobr></div>
<div style="position:absolute;top:48551;left:213"><nobr><b>preconditioner    DIC;</b></nobr></div>
<div style="position:absolute;top:48584;left:208"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:48584;left:629"><nobr><b>1e-4;</b></nobr></div>
<div style="position:absolute;top:48615;left:208"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:48615;left:629"><nobr><b>0.05;</b></nobr></div>
<div style="position:absolute;top:48648;left:143"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:48775;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="61"><b>Page 61</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:48798;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:48890;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:48956;left:11"><nobr>•  These are the linear solvers I often use.</nobr></div>
<div style="position:absolute;top:48999;left:11"><nobr>•  For the velocity equation I always use a tolerance equal to 1e-8 and    </nobr></div>
<div style="position:absolute;top:49032;left:44"><nobr>relTol equal to 0.0</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:49146;left:196"><nobr><b>U</b></nobr></div>
<div style="position:absolute;top:49178;left:196"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:49211;left:277"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:49211;left:720"><nobr><b>PBiCG;</b></nobr></div>
<div style="position:absolute;top:49242;left:282"><nobr><b>preconditioner    DILU;</b></nobr></div>
<div style="position:absolute;top:49275;left:277"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:49275;left:720"><nobr><b>1e-8;</b></nobr></div>
<div style="position:absolute;top:49307;left:277"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:49307;left:720"><nobr><b>0.0;</b></nobr></div>
<div style="position:absolute;top:49340;left:212"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:49585;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="62"><b>Page 62</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:49608;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:49700;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:49766;left:11"><nobr>•  I like to set the minimum number of iterations to three, especially for the pressure.</nobr></div>
<div style="position:absolute;top:49809;left:11"><nobr>•  If your solver is doing too much iterations, you can set the maximum number of</nobr></div>
<div style="position:absolute;top:49842;left:44"><nobr>iterations.  But be careful, if the solver reach the maximum number of iterations it will</nobr></div>
<div style="position:absolute;top:49874;left:44"><nobr>stop, we are talking about unconverged iterations.</nobr></div>
<div style="position:absolute;top:49919;left:11"><nobr>•  You can set the maximum number of iterations specially during the first time-steps</nobr></div>
<div style="position:absolute;top:49952;left:44"><nobr>where the solver takes longer.</nobr></div>
<div style="position:absolute;top:49995;left:11"><nobr>•  I use <b><font color="#660066">minIter </font></b>and <b><font color="#660066">maxIter </font></b>on symmetric and asymmetric matrix solvers.</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:50066;left:143"><nobr><b>p</b></nobr></div>
<div style="position:absolute;top:50097;left:143"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:50130;left:208"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:50130;left:629"><nobr><b>PCG;</b></nobr></div>
<div style="position:absolute;top:50162;left:213"><nobr><b>preconditioner    DIC;</b></nobr></div>
<div style="position:absolute;top:50195;left:208"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:50195;left:629"><nobr><b>1e-4;</b></nobr></div>
<div style="position:absolute;top:50226;left:208"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:50226;left:629"><nobr><b>0.01;</b></nobr></div>
<div style="position:absolute;top:50259;left:213"><nobr><b>minIter    </b></nobr></div>
<div style="position:absolute;top:50259;left:629"><nobr><b>3;</b></nobr></div>
<div style="position:absolute;top:50292;left:213"><nobr><b>maxIter    </b></nobr></div>
<div style="position:absolute;top:50292;left:629"><nobr><b>100;</b></nobr></div>
<div style="position:absolute;top:50324;left:143"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:50395;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="63"><b>Page 63</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:50418;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:50510;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:50576;left:11"><nobr>•  The default option is the conventional segregated solution.  That is, you first solve for</nobr></div>
<div style="position:absolute;top:50607;left:44"><nobr>velocity component x, then velocity component y and finally velocity component z.</nobr></div>
<div style="position:absolute;top:50652;left:11"><nobr>•  You can get some improvement in terms of stability and turn around time by using the</nobr></div>
<div style="position:absolute;top:50684;left:44"><nobr>coupled matrix solver for vectors and tensors, <i>i.e.</i>, if you are solving the velocity field,</nobr></div>
<div style="position:absolute;top:50717;left:44"><nobr>you solve all the velocity components at once.</nobr></div>
<div style="position:absolute;top:50762;left:11"><nobr>•  To select the coupled solver you need to use the keyword <b><font color="#660066">coupled </font></b>in the</nobr></div>
</span></font>
<font color="#77933c" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#77933c">
<div style="position:absolute;top:50795;left:44"><nobr><b>fvSolution </b><font color="#000000">dictionary.</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:50838;left:11"><nobr>•  In the coupled matrix solver you set tolerance as a vector (absolute and relative)</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:50896;left:208"><nobr><b>U</b></nobr></div>
<div style="position:absolute;top:50928;left:208"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:50961;left:273"><nobr><b>type    </b></nobr></div>
<div style="position:absolute;top:50961;left:532"><nobr><b>coupled;</b></nobr></div>
<div style="position:absolute;top:50992;left:273"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:50992;left:532"><nobr><b>cPBiCCCG;</b></nobr></div>
<div style="position:absolute;top:51025;left:273"><nobr><b>preconditioner  DILU;</b></nobr></div>
<div style="position:absolute;top:51057;left:273"><nobr><b>tolerance     (1e-08 1e-08 1e-08);</b></nobr></div>
<div style="position:absolute;top:51090;left:273"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:51090;left:532"><nobr><b>(0 0 0);</b></nobr></div>
<div style="position:absolute;top:51123;left:278"><nobr><b>minIter    3;</b></nobr></div>
<div style="position:absolute;top:51154;left:208"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:51205;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="64"><b>Page 64</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:51228;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:51320;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:51386;left:11"><nobr>•  Remember, you must do at least one corrector step when using PISO solvers. </nobr></div>
<div style="position:absolute;top:51429;left:11"><nobr>•  When you use the PISO and PIMPLE solvers, you also have the option to set the</nobr></div>
<div style="position:absolute;top:51462;left:44"><nobr>tolerance for the final corrector step (.*Final).  </nobr></div>
<div style="position:absolute;top:51506;left:11"><nobr>•  By proceeding in this way, you can put all the computational effort only in last</nobr></div>
<div style="position:absolute;top:51539;left:44"><nobr>corrector step (.*Final).</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:19px;font-family:Times;color:#660066">
<div style="position:absolute;top:51634;left:304"><nobr><b>pFinal</b></nobr></div>
<div style="position:absolute;top:51658;left:304"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:51684;left:358"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:51684;left:628"><nobr><b>GAMG;</b></nobr></div>
<div style="position:absolute;top:51709;left:358"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:51709;left:628"><nobr><b>1e-06;</b></nobr></div>
<div style="position:absolute;top:51735;left:358"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:51735;left:628"><nobr><b>0.0;</b></nobr></div>
<div style="position:absolute;top:51760;left:358"><nobr><b>smoother    </b></nobr></div>
<div style="position:absolute;top:51760;left:628"><nobr><b>GaussSeidel;</b></nobr></div>
<div style="position:absolute;top:51784;left:358"><nobr><b>nPreSweeps    </b></nobr></div>
<div style="position:absolute;top:51784;left:628"><nobr><b>0;</b></nobr></div>
<div style="position:absolute;top:51810;left:358"><nobr><b>nPostSweeps    </b></nobr></div>
<div style="position:absolute;top:51810;left:628"><nobr><b>2;</b></nobr></div>
<div style="position:absolute;top:51835;left:358"><nobr><b>cacheAgglomeration  on;</b></nobr></div>
<div style="position:absolute;top:51861;left:358"><nobr><b>agglomerator    </b></nobr></div>
<div style="position:absolute;top:51861;left:628"><nobr><b>faceAreaPair;</b></nobr></div>
<div style="position:absolute;top:51886;left:358"><nobr><b>nCellsInCoarsestLevel</b></nobr></div>
<div style="position:absolute;top:51886;left:682"><nobr><b>1000;</b></nobr></div>
<div style="position:absolute;top:51910;left:358"><nobr><b>mergeLevels    </b></nobr></div>
<div style="position:absolute;top:51910;left:682"><nobr><b>1;</b></nobr></div>
<div style="position:absolute;top:51936;left:304"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:52015;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="65"><b>Page 65</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:52038;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:52130;left:419"><nobr><b>Linear solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:52196;left:11"><nobr>•  By proceeding in this way, you can put all the computational effort only in last</nobr></div>
<div style="position:absolute;top:52227;left:44"><nobr>corrector step (.*Final).</nobr></div>
<div style="position:absolute;top:52272;left:11"><nobr>•  For all the intermediate corrector steps, you can use a more relaxed convergence</nobr></div>
<div style="position:absolute;top:52304;left:44"><nobr>criterion.</nobr></div>
<div style="position:absolute;top:52349;left:11"><nobr>•  For example, you can use the following solver and tolerance criterion for all the</nobr></div>
<div style="position:absolute;top:52382;left:44"><nobr>intermediate corrector steps (<b><font color="#660066">p</font></b>), then in the final corrector step (<b><font color="#660066">pFinal</font></b>) you tight the</nobr></div>
<div style="position:absolute;top:52413;left:44"><nobr>solver tolerance.</nobr></div>
</span></font>
<font color="#660066" face="Times" size="3"><span style="font-size:19px;font-family:Times;color:#660066">
<div style="position:absolute;top:52476;left:11"><nobr><b>p</b></nobr></div>
<div style="position:absolute;top:52500;left:11"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:52525;left:65"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:52525;left:335"><nobr><b>GAMG;</b></nobr></div>
<div style="position:absolute;top:52551;left:65"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:52551;left:335"><nobr><b>1e-05;</b></nobr></div>
<div style="position:absolute;top:52576;left:65"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:52576;left:335"><nobr><b>0.05;</b></nobr></div>
<div style="position:absolute;top:52602;left:65"><nobr><b>smoother    </b></nobr></div>
<div style="position:absolute;top:52602;left:335"><nobr><b>GaussSeidel;</b></nobr></div>
<div style="position:absolute;top:52626;left:65"><nobr><b>nPreSweeps    </b></nobr></div>
<div style="position:absolute;top:52626;left:335"><nobr><b>0;</b></nobr></div>
<div style="position:absolute;top:52651;left:65"><nobr><b>nPostSweeps    </b></nobr></div>
<div style="position:absolute;top:52651;left:335"><nobr><b>2;</b></nobr></div>
<div style="position:absolute;top:52677;left:65"><nobr><b>cacheAgglomeration  on;</b></nobr></div>
<div style="position:absolute;top:52702;left:65"><nobr><b>agglomerator    </b></nobr></div>
<div style="position:absolute;top:52702;left:335"><nobr><b>faceAreaPair;</b></nobr></div>
<div style="position:absolute;top:52728;left:65"><nobr><b>nCellsInCoarsestLevel</b></nobr></div>
<div style="position:absolute;top:52728;left:389"><nobr><b>1000;</b></nobr></div>
<div style="position:absolute;top:52752;left:65"><nobr><b>mergeLevels    </b></nobr></div>
<div style="position:absolute;top:52752;left:389"><nobr><b>1;</b></nobr></div>
<div style="position:absolute;top:52777;left:11"><nobr><b>}</b></nobr></div>
<div style="position:absolute;top:52476;left:569"><nobr><b>pFinal</b></nobr></div>
<div style="position:absolute;top:52500;left:569"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:52525;left:623"><nobr><b>solver    </b></nobr></div>
<div style="position:absolute;top:52525;left:893"><nobr><b>GAMG;</b></nobr></div>
<div style="position:absolute;top:52551;left:623"><nobr><b>tolerance    </b></nobr></div>
<div style="position:absolute;top:52551;left:893"><nobr><b>1e-06;</b></nobr></div>
<div style="position:absolute;top:52576;left:623"><nobr><b>relTol    </b></nobr></div>
<div style="position:absolute;top:52576;left:893"><nobr><b>0.0;</b></nobr></div>
<div style="position:absolute;top:52602;left:623"><nobr><b>smoother    </b></nobr></div>
<div style="position:absolute;top:52602;left:893"><nobr><b>GaussSeidel;</b></nobr></div>
<div style="position:absolute;top:52626;left:623"><nobr><b>nPreSweeps    </b></nobr></div>
<div style="position:absolute;top:52626;left:893"><nobr><b>0;</b></nobr></div>
<div style="position:absolute;top:52651;left:623"><nobr><b>nPostSweeps    </b></nobr></div>
<div style="position:absolute;top:52651;left:893"><nobr><b>2;</b></nobr></div>
<div style="position:absolute;top:52677;left:623"><nobr><b>cacheAgglomeration  on;</b></nobr></div>
<div style="position:absolute;top:52702;left:623"><nobr><b>agglomerator    </b></nobr></div>
<div style="position:absolute;top:52702;left:893"><nobr><b>faceAreaPair;</b></nobr></div>
<div style="position:absolute;top:52728;left:623"><nobr><b>nCellsInCoarsestLevel</b></nobr></div>
<div style="position:absolute;top:52728;left:947"><nobr><b>1000;</b></nobr></div>
<div style="position:absolute;top:52752;left:623"><nobr><b>mergeLevels    </b></nobr></div>
<div style="position:absolute;top:52752;left:947"><nobr><b>1;</b></nobr></div>
<div style="position:absolute;top:52777;left:569"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:52825;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="66"><b>Page 66</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:52848;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:52940;left:151"><nobr><b>Transient simulations and time-step selection</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:53008;left:11"><nobr>•  Remember, the fact that we are using an implicit solver (unconditionally stable), does</nobr></div>
<div style="position:absolute;top:53039;left:44"><nobr>not mean that we can choose a time step of any size.</nobr></div>
<div style="position:absolute;top:53128;left:11"><nobr>•  The time-step must be chosen in such a way that it resolves the time-dependent</nobr></div>
<div style="position:absolute;top:53161;left:44"><nobr>features and it maintain the solver stability. </nobr></div>
</span></font>

<div style="position:absolute;top:53635;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="67"><b>Page 67</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:53658;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:53750;left:151"><nobr><b>Transient simulations and time-step selection</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:53818;left:11"><nobr>•  In my personal experience, I have been able to go up to a CFL = 5.0 while</nobr></div>
<div style="position:absolute;top:53849;left:44"><nobr>maintaining the accuracy. To achieve this I had to increase the number of corrector</nobr></div>
<div style="position:absolute;top:53882;left:44"><nobr>steps in the PIMPLE solver, decrease the under-relaxation factors and tightening the</nobr></div>
<div style="position:absolute;top:53914;left:44"><nobr>convergence criteria; and this translates into a higher computational cost.</nobr></div>
<div style="position:absolute;top:54004;left:11"><nobr>•  I have managed to run with CFL numbers up to 40, but this highly reduces the</nobr></div>
<div style="position:absolute;top:54035;left:44"><nobr>accuracy of the solution.  Also, is quite difficult to maintain the stability of the solver.</nobr></div>
<div style="position:absolute;top:54124;left:11"><nobr>•  As I am often interested in the unsteadiness of the solution, I usually use a CFL</nobr></div>
<div style="position:absolute;top:54157;left:44"><nobr>number not larger than 1.0. </nobr></div>
</span></font>

<div style="position:absolute;top:54445;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="68"><b>Page 68</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:54468;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:54560;left:151"><nobr><b>Transient simulations and time-step selection</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:54628;left:11"><nobr>•  If accuracy is the goal (e.g., predicting forces), definitively use a CFL less than 1.0.</nobr></div>
<div style="position:absolute;top:54689;left:11"><nobr>•  If you are doing LES simulations, I highly advice you to use a CFL less than 0.6 and if</nobr></div>
<div style="position:absolute;top:54722;left:44"><nobr>you can afford it, less than 0.3</nobr></div>
<div style="position:absolute;top:54784;left:11"><nobr>•  If you are doing LES or you are interested in the accurate prediction of forces,</nobr></div>
<div style="position:absolute;top:54817;left:44"><nobr>definitely you need <b>high quality meshes</b>, preferable made of hexahedral elements.</nobr></div>
<div style="position:absolute;top:54880;left:11"><nobr>•  I usually use the PIMPLE solver.  In the PIMPLE solver you have the option to limit</nobr></div>
<div style="position:absolute;top:54911;left:44"><nobr>your time-step to a maximum CFL number, so the solver automatically choose the</nobr></div>
<div style="position:absolute;top:54944;left:44"><nobr>time-step.  This is a very cool feature.</nobr></div>
<div style="position:absolute;top:55006;left:11"><nobr>•  In the PISO solver you need to give the time-step size. So basically you need to</nobr></div>
<div style="position:absolute;top:55039;left:44"><nobr>choose your time-step so it does not exceed a target CFL value.</nobr></div>
<div style="position:absolute;top:55205;left:1007"><nobr><b>10 </b></nobr></div>
</span></font>

<div style="position:absolute;top:55255;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="69"><b>Page 69</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:55278;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:55438;left:11"><nobr>•  You can easily also modify the PISO solver so it automatically choose the time-step</nobr></div>
<div style="position:absolute;top:55469;left:44"><nobr>according to a maximum CFL number, you just need to add one line of code.</nobr></div>
<div style="position:absolute;top:55558;left:11"><nobr>•  Remember, setting the keyword <b><font color="#660066">nOuterCorrectors </font></b>equal to 1 in the PIMPLE</nobr></div>
<div style="position:absolute;top:55591;left:44"><nobr>solver is equivalent to use the PISO solver.</nobr></div>
<div style="position:absolute;top:55679;left:11"><nobr>•  The PIMPLE solver is a solver specially formulated for large time-steps.  So in order</nobr></div>
<div style="position:absolute;top:55712;left:44"><nobr>to increase the stability you will need to add more corrector steps</nobr></div>
<div style="position:absolute;top:55744;left:44"><nobr>(<b><font color="#660066">nOuterCorrectors </font></b>and <b><font color="#660066">nCorrectors</font></b>).</nobr></div>
<div style="position:absolute;top:55834;left:11"><nobr>•  A smaller time-step may be needed in the first iterations to maintain solver stability.</nobr></div>
<div style="position:absolute;top:55865;left:44"><nobr>Have in mind that the first time steps may take longer to converge, do not be alarmed</nobr></div>
<div style="position:absolute;top:55898;left:44"><nobr>of this behavior, it is perfectly normal.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:55370;left:151"><nobr><b>Transient simulations and time-step selection </b></nobr></div>
</span></font>

<div style="position:absolute;top:56065;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="70"><b>Page 70</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:56088;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:56248;left:11"><nobr>•  If you are interested in the initial transient, you should start using a high order</nobr></div>
<div style="position:absolute;top:56279;left:44"><nobr>discretization scheme, with a tight convergence criterion, and the right flow properties.</nobr></div>
<div style="position:absolute;top:56368;left:11"><nobr>•  If you start from an approximate initial solution obtained from an steady simulation,</nobr></div>
<div style="position:absolute;top:56401;left:44"><nobr>the initial transient will not be accurate.</nobr></div>
<div style="position:absolute;top:56489;left:11"><nobr>•  If the solution is not converging or is taking too long to converge, try to reduce your</nobr></div>
<div style="position:absolute;top:56522;left:44"><nobr>time-step.</nobr></div>
<div style="position:absolute;top:56611;left:11"><nobr>•  If you use the first order Euler scheme, try to use a CFL number less than 1.0 and</nobr></div>
<div style="position:absolute;top:56644;left:44"><nobr>preferably in the order of 0.6-0.8, this is in order to keep temporal diffusion to a</nobr></div>
<div style="position:absolute;top:56675;left:44"><nobr>minimum.  Yes, numerical diffusion also applies in time. </nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:56180;left:151"><nobr><b>Transient simulations and time-step selection </b></nobr></div>
</span></font>

<div style="position:absolute;top:56875;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="71"><b>Page 71</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:56898;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:57058;left:11"><nobr>•  In order to speed up the computation and if you are not interested in the initial</nobr></div>
<div style="position:absolute;top:57089;left:44"><nobr>transient, you can start using a large time-step (high CFL).</nobr></div>
<div style="position:absolute;top:57178;left:11"><nobr>•  When you are ready to sample the quantity of interest, reduce the time-step to get a</nobr></div>
<div style="position:absolute;top:57211;left:44"><nobr>CFL less than one and let the simulation run for a while before doing any sampling.  </nobr></div>
<div style="position:absolute;top:57299;left:11"><nobr>•  My recommendation is to always monitor your solution, and preferably use the</nobr></div>
<div style="position:absolute;top:57334;left:44"><nobr>PIMPLE solver.</nobr></div>
<div style="position:absolute;top:57421;left:11"><nobr>•  When using the PIMPLE or PISO solver (with maximum CFL feature enable), the</nobr></div>
<div style="position:absolute;top:57454;left:44"><nobr>solver will use as a time-step for the first iteration the value set by the keyword</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:57487;left:44"><nobr><b>deltaT </b><font color="#000000">in the </font><b><font color="#77933c">controlDict </font></b><font color="#000000">dictionary.  So if you set a high value, is likely that the</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:57518;left:44"><nobr>solver will explode.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:56990;left:151"><nobr><b>Transient simulations and time-step selection </b></nobr></div>
</span></font>

<div style="position:absolute;top:57685;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="72"><b>Page 72</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:57708;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:57868;left:11"><nobr>•  My advice is to set a low <b><font color="#660066">deltaT </font></b>and then let the solver gradually adjust the time-</nobr></div>
<div style="position:absolute;top:57899;left:44"><nobr>step until the desired maximum CFL is reached.</nobr></div>
<div style="position:absolute;top:57988;left:11"><nobr>•  Some fancy high order numerical schemes (such as the vanLeer, vanAlbada,</nobr></div>
<div style="position:absolute;top:58021;left:44"><nobr>superbee, MUSCL, OSPRE – cool names no – ), are hard to start.  So it is better to</nobr></div>
<div style="position:absolute;top:58054;left:44"><nobr>begin with a small time-step and increase it gradually.  </nobr></div>
<div style="position:absolute;top:58142;left:11"><nobr>•  And by small time-step I mean a time-step that will give a CFL about 0.1.</nobr></div>
<div style="position:absolute;top:58231;left:11"><nobr>•  Remember, you can change the temporal discretization on the fly.  As for the spatial</nobr></div>
<div style="position:absolute;top:58264;left:44"><nobr>discretization, first order schemes are robust and second order schemes are</nobr></div>
<div style="position:absolute;top:58295;left:44"><nobr>accurate.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:57800;left:151"><nobr><b>Transient simulations and time-step selection </b></nobr></div>
</span></font>

<div style="position:absolute;top:58495;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="73"><b>Page 73</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:58518;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:58678;left:11"><nobr>•  The temporal discretization schemes are set in the <b><font color="#77933c">fvSchemes </font></b>dictionary.  To select</nobr></div>
<div style="position:absolute;top:58709;left:44"><nobr>the schemes you need to use the keyword <b><font color="#660066">ddtSchemes</font></b>.</nobr></div>
<div style="position:absolute;top:58798;left:11"><nobr>•  Euler is a first order implicit scheme (bounded).</nobr></div>
<div style="position:absolute;top:58888;left:11"><nobr>•  Backward is a second order implicit scheme (unbounded).  Similar to the linear</nobr></div>
<div style="position:absolute;top:58919;left:44"><nobr>multistep Adams-Moulton scheme.</nobr></div>
<div style="position:absolute;top:59008;left:11"><nobr>•  Crank-Nicolson is a second order implicit scheme (bounded).</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:58610;left:35"><nobr><b>Transient simulations and temporal discretization schemes </b></nobr></div>
</span></font>

<div style="position:absolute;top:59305;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="74"><b>Page 74</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:59328;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:59488;left:11"><nobr>•  It you do not know what temporal discretization scheme to use, go for the Crank-</nobr></div>
<div style="position:absolute;top:59519;left:44"><nobr>Nicolson.</nobr></div>
<div style="position:absolute;top:59608;left:11"><nobr>•  The Crank-Nicolson as it is implemented in OpenFOAM®, uses a blending factor     .</nobr></div>
<div style="position:absolute;top:59641;left:44"><nobr>FYI, you can change the blending on the fly. </nobr></div>
<div style="position:absolute;top:59729;left:11"><nobr>•  Setting     equal to 0 is equivalent to running a pure Euler scheme (robust but first</nobr></div>
<div style="position:absolute;top:59762;left:44"><nobr>order accurate).  By setting the blending factor equal to 1 you use a pure Crank-</nobr></div>
<div style="position:absolute;top:59794;left:44"><nobr>Nicolson (accurate but oscillatory, formally second order accurate).  If you set the</nobr></div>
<div style="position:absolute;top:59827;left:44"><nobr>blending factor to 0.5, you get something in between first order accuracy and second</nobr></div>
<div style="position:absolute;top:59860;left:44"><nobr>order accuracy, or in other words, you get the best of both worlds.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:59420;left:35"><nobr><b>Transient simulations and temporal discretization schemes</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:59939;left:223"><nobr><b>ddtSchemes</b></nobr></div>
<div style="position:absolute;top:59971;left:223"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:60004;left:288"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:60004;left:531"><nobr><b>CrankNicolson   ;</b></nobr></div>
<div style="position:absolute;top:60035;left:223"><nobr><b>} </b></nobr></div>
</span></font>

<div style="position:absolute;top:60115;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="75"><b>Page 75</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:60138;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:60298;left:11"><nobr>•  The Crank-Nicolson as it is implemented in OpenFOAM®, uses a blending factor     . </nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:60230;left:35"><nobr><b>Transient simulations and temporal discretization schemes</b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:60378;left:223"><nobr><b>ddtSchemes</b></nobr></div>
<div style="position:absolute;top:60409;left:223"><nobr><b>{</b></nobr></div>
<div style="position:absolute;top:60442;left:288"><nobr><b>default    </b></nobr></div>
<div style="position:absolute;top:60442;left:531"><nobr><b>CrankNicolson   ;</b></nobr></div>
<div style="position:absolute;top:60474;left:223"><nobr><b>}</b></nobr></div>
</span></font>
<font face="Times" size="8"><span style="font-size:64px;font-family:Times">
<div style="position:absolute;top:60714;left:70"><nobr>0</nobr></div>
<div style="position:absolute;top:60714;left:968"><nobr>1</nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:60828;left:690"><nobr>Pure Crank-Nicolson</nobr></div>
<div style="position:absolute;top:60859;left:690"><nobr>2<font style="font-size:16px">nd </font>order, bounded</nobr></div>
<div style="position:absolute;top:60829;left:144"><nobr>Pure Euler</nobr></div>
<div style="position:absolute;top:60860;left:144"><nobr>1<font style="font-size:16px">st </font>order, bounded </nobr></div>
</span></font>

<div style="position:absolute;top:60925;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="76"><b>Page 76</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:60948;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:61040;left:348"><nobr><b>Notes on convergence</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:61106;left:11"><nobr>•  Determining when the solution is converged can be really difficult. </nobr></div>
<div style="position:absolute;top:61194;left:11"><nobr>•  Solutions can be considered converged when the flow field and scalar fields are no</nobr></div>
<div style="position:absolute;top:61226;left:44"><nobr>longer changing, but usually this is not the case for unsteady flows.  Most flows in</nobr></div>
<div style="position:absolute;top:61259;left:44"><nobr>nature and industrial applications are highly unsteady.</nobr></div>
<div style="position:absolute;top:61347;left:11"><nobr>•  It is a good practice to monitor the residuals.  But be careful, residuals are not always</nobr></div>
<div style="position:absolute;top:61380;left:44"><nobr>indicative of a converged solution.  The final residuals will reach the tolerance</nobr></div>
<div style="position:absolute;top:61412;left:44"><nobr>criterion in each iteration, but the flow field may be continuously changing from instant</nobr></div>
<div style="position:absolute;top:61445;left:44"><nobr>to instant.</nobr></div>
<div style="position:absolute;top:61533;left:11"><nobr>•  In order to properly assess convergence, it is also recommended to monitor a</nobr></div>
<div style="position:absolute;top:61566;left:44"><nobr>physical quantity. If this physical quantity does not change in time you may say that</nobr></div>
<div style="position:absolute;top:61598;left:44"><nobr>the solution is converge.   </nobr></div>
</span></font>

<div style="position:absolute;top:61735;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="77"><b>Page 77</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:61758;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:61850;left:348"><nobr><b>Notes on convergence</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:61916;left:11"><nobr>•  But be careful, it can be the case that the monitored quantity exhibit a random</nobr></div>
<div style="position:absolute;top:61947;left:44"><nobr>oscillatory behavior or a periodic oscillatory behavior, in the former case you are in</nobr></div>
<div style="position:absolute;top:61980;left:44"><nobr>the presence of a highly unsteady and turbulent flow with no periodic behavior; in</nobr></div>
<div style="position:absolute;top:62012;left:44"><nobr>latter case you may say that you have reached a converged periodic unsteady</nobr></div>
<div style="position:absolute;top:62045;left:44"><nobr>solution.  </nobr></div>
<div style="position:absolute;top:62133;left:11"><nobr>•  Remember, for unsteady flows you will need to analyze/sample the solution in a given</nobr></div>
<div style="position:absolute;top:62166;left:44"><nobr>time window. Do not take the last saved solution as the final answer.</nobr></div>
<div style="position:absolute;top:62255;left:11"><nobr>•  If your goal is predicting forces (e.g., drag prediction).   You should monitor the forces,</nobr></div>
<div style="position:absolute;top:62288;left:44"><nobr>and use them as your convergence criterion.</nobr></div>
<div style="position:absolute;top:62376;left:11"><nobr>•  The convergence depends on the mesh quality, so a <b>good quality mesh </b>means</nobr></div>
<div style="position:absolute;top:62408;left:44"><nobr>faster convergence and accurate solution.</nobr></div>
<div style="position:absolute;top:62495;left:1008"><nobr><b>11 </b></nobr></div>
</span></font>

<div style="position:absolute;top:62545;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="78"><b>Page 78</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:62568;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:62660;left:348"><nobr><b>Notes on convergence</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:62726;left:11"><nobr>•  In general, overall mass balance should be satisfied.  Remember, the method is</nobr></div>
<div style="position:absolute;top:62757;left:44"><nobr>conservative.  What goes in, goes out.</nobr></div>
<div style="position:absolute;top:62846;left:11"><nobr>•  Residuals are not your solution. Low residuals do not automatically mean a correct</nobr></div>
<div style="position:absolute;top:62879;left:44"><nobr>solution, and high residuals do not automatically mean a wrong solution.</nobr></div>
<div style="position:absolute;top:62967;left:11"><nobr>•  Initial residuals are often higher with higher order discretization schemes than with</nobr></div>
<div style="position:absolute;top:63000;left:44"><nobr>first order discretization. That does not mean that the first order solution is better.</nobr></div>
<div style="position:absolute;top:63089;left:11"><nobr>•  Always ensure proper convergence before using a solution. A not converged solution</nobr></div>
<div style="position:absolute;top:63122;left:44"><nobr>can be misleading when interpreting the results. </nobr></div>
</span></font>

<div style="position:absolute;top:63355;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="79"><b>Page 79</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:63378;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:63470;left:348"><nobr><b>Notes on convergence </b></nobr></div>
</span></font>

<div style="position:absolute;top:64165;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="80"><b>Page 80</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:64188;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:64280;left:348"><nobr><b>Notes on convergence </b></nobr></div>
</span></font>

<div style="position:absolute;top:64975;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="81"><b>Page 81</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:64998;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:65090;left:29"><nobr><b>Monitoring minimum and maximum values of field variables</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:65156;left:11"><nobr>•  I always monitor the minimum and maximum values of the field variables.  For me this</nobr></div>
<div style="position:absolute;top:65187;left:44"><nobr>is the best indication of stability and accuracy.  For this, I use <b><font color="#660066">functionObject</font></b>.</nobr></div>
<div style="position:absolute;top:65276;left:11"><nobr>•  If at one point of the simulation, velocity is higher that the speed of light (believe me,</nobr></div>
<div style="position:absolute;top:65309;left:44"><nobr>that can happen), you know that something is wrong.  </nobr></div>
<div style="position:absolute;top:65397;left:11"><nobr>•  And believe me, using upwind you can get solutions at velocities higher that the</nobr></div>
<div style="position:absolute;top:65430;left:44"><nobr>speed of light, you can even do coffee if you want.</nobr></div>
<div style="position:absolute;top:65519;left:11"><nobr>•  You can also see an oscillatory behavior of the minimum and maximum values of the</nobr></div>
<div style="position:absolute;top:65552;left:44"><nobr>monitored quantity.  This is also an indication that something is going bananas.</nobr></div>
<div style="position:absolute;top:65640;left:11"><nobr>•  For some variables (<i>e.g. </i>volume fraction), the method must be bounded.  This means</nobr></div>
<div style="position:absolute;top:65672;left:44"><nobr>that the values should not exceed some predefined minimum or maximum value</nobr></div>
<div style="position:absolute;top:65705;left:44"><nobr>(usually 0 and 1). </nobr></div>
</span></font>

<div style="position:absolute;top:65785;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="82"><b>Page 82</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:65808;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:65900;left:282"><nobr><b>Again, our friend mesh quality </b></nobr></div>
</span></font>

<div style="position:absolute;top:66595;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="83"><b>Page 83</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:66618;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:66710;left:318"><nobr><b>Mesh quality and cell type</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:66778;left:11"><nobr>•  <b>I do not know how much to stress this, but try to always use a good quality</b></nobr></div>
<div style="position:absolute;top:66809;left:44"><nobr><b>mesh. Remember, garbage in - garbage out.</b></nobr></div>
<div style="position:absolute;top:66898;left:11"><nobr>•  Or in a positive way, <b>good mesh – good results</b>.</nobr></div>
<div style="position:absolute;top:66988;left:11"><nobr>•  Use hexahedral meshes whenever is possible, specially if high accuracy in predicting</nobr></div>
<div style="position:absolute;top:67019;left:44"><nobr>forces is your goal (e.g., drag prediction).  </nobr></div>
<div style="position:absolute;top:67108;left:11"><nobr>•  For the same cell count, hexahedral meshes will give more accurate solutions,</nobr></div>
<div style="position:absolute;top:67141;left:44"><nobr>especially if the grid lines are aligned with the flow.</nobr></div>
<div style="position:absolute;top:67229;left:11"><nobr>•  But this does not mean that tetra mesh are no good, by carefully choosing the</nobr></div>
<div style="position:absolute;top:67262;left:44"><nobr>numerical scheme, you can get the same level of accuracy.  The problem with tetra</nobr></div>
<div style="position:absolute;top:67294;left:44"><nobr>meshes are mainly related to the way gradients are computed.</nobr></div>
<div style="position:absolute;top:67355;left:1007"><nobr><b>12 </b></nobr></div>
</span></font>

<div style="position:absolute;top:67405;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="84"><b>Page 84</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:67428;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:67588;left:11"><nobr>•  Tetra meshes normally need more computing resources during solving stage. But his</nobr></div>
<div style="position:absolute;top:67619;left:44"><nobr>can be easily offset by the time saved during the mesh generation stage. </nobr></div>
<div style="position:absolute;top:67708;left:11"><nobr>•  If the geometry is slightly complicated, it is just a waste to spend time on hex</nobr></div>
<div style="position:absolute;top:67741;left:44"><nobr>meshing. Your results will not be better, most of time, if not always. With todays</nobr></div>
<div style="position:absolute;top:67774;left:44"><nobr>advances in HPC and numerical methods, the computing time saved with hex mesh</nobr></div>
<div style="position:absolute;top:67805;left:44"><nobr>is marginal compared with time wasted in mesh generation.</nobr></div>
<div style="position:absolute;top:67894;left:11"><nobr>•  Increasing the cells count will likely improve the solution accuracy, but at the cost of a</nobr></div>
<div style="position:absolute;top:67927;left:44"><nobr>higher computational cost.</nobr></div>
<div style="position:absolute;top:68015;left:11"><nobr>•  But attention, finer mesh does not mean a good or better mesh.  </nobr></div>
<div style="position:absolute;top:68104;left:11"><nobr>•  Very often when you refine your mesh (specially when it is done automatically), the</nobr></div>
<div style="position:absolute;top:68137;left:44"><nobr>overall quality of the mesh is reduced due to clustering and stretching of the mesh.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:67520;left:318"><nobr><b>Mesh quality and cell type </b></nobr></div>
</span></font>

<div style="position:absolute;top:68215;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="85"><b>Page 85</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:68238;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:68398;left:11"><nobr>•  Change in cell size should be smooth.</nobr></div>
<div style="position:absolute;top:68476;left:11"><nobr>•  In boundary layers, quad, hex, and prism/wedge cells are preferred over triangles,</nobr></div>
<div style="position:absolute;top:68507;left:44"><nobr>tetrahedras, or pyramids.</nobr></div>
<div style="position:absolute;top:68596;left:11"><nobr>•  The mesh density should be high enough to capture all relevant flow features.  A </nobr></div>
<div style="position:absolute;top:68629;left:44"><nobr>good mesh should be done in such a way that it resolve the physics of interest and it</nobr></div>
<div style="position:absolute;top:68662;left:44"><nobr>is adequate for the models used, and not in the fact that the more cells we use the</nobr></div>
<div style="position:absolute;top:68693;left:44"><nobr>better the accuracy. </nobr></div>
<div style="position:absolute;top:68782;left:11"><nobr>•  A good mesh resolve physics, and does not need to follow the CAD model.  We are</nobr></div>
<div style="position:absolute;top:68815;left:44"><nobr>talking about geometry defeaturing, you do not need to resolve all features of your</nobr></div>
<div style="position:absolute;top:68848;left:44"><nobr>CAD model.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:68330;left:318"><nobr><b>Mesh quality and cell type</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:68975;left:1007"><nobr><b>13 </b></nobr></div>
</span></font>

<div style="position:absolute;top:69025;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="86"><b>Page 86</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:69048;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:69208;left:11"><nobr>•  There is a new type of meshes in town, polyhedral meshes.</nobr></div>
<div style="position:absolute;top:69296;left:11"><nobr>•  Many meshing guys and CFDers claim that polyhedral meshes are the panacea of</nobr></div>
<div style="position:absolute;top:69328;left:44"><nobr>meshing.</nobr></div>
<div style="position:absolute;top:69418;left:11"><nobr>•  In polyhedral meshes the cells have more neighbors than in tetrahedral and/or</nobr></div>
<div style="position:absolute;top:69449;left:44"><nobr>hexahedral meshes, hence the gradients are approximated better on polyhedral</nobr></div>
<div style="position:absolute;top:69482;left:44"><nobr>meshes.  </nobr></div>
<div style="position:absolute;top:69560;left:11"><nobr>•  But attention, this does not mean that this kind of meshes are the solution to all</nobr></div>
<div style="position:absolute;top:69592;left:44"><nobr>meshing problems, is just a new religion in the meshing and CFD community, you</nobr></div>
<div style="position:absolute;top:69625;left:44"><nobr>need to become a true believer.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:69140;left:318"><nobr><b>Mesh quality and cell type </b></nobr></div>
</span></font>

<div style="position:absolute;top:69835;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="87"><b>Page 87</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:69858;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:70018;left:11"><nobr>•  Another interesting property of polyhedral meshes is that they reduce the cell count. </nobr></div>
<div style="position:absolute;top:70049;left:44"><nobr>But there is a catch, they increase the number of faces so you need to compute more</nobr></div>
<div style="position:absolute;top:70082;left:44"><nobr>fluxes (diffusive and convective). </nobr></div>
<div style="position:absolute;top:70171;left:11"><nobr>•  Polyhedral meshes are not easy to generate, most of the times you need to start from</nobr></div>
<div style="position:absolute;top:70204;left:44"><nobr>tetrahedral meshes.  </nobr></div>
<div style="position:absolute;top:70292;left:11"><nobr>•  In my personal experience, polyhedral meshes inhered the same quality problems of</nobr></div>
<div style="position:absolute;top:70324;left:44"><nobr>the starting tetrahedral mesh, sometimes they made things worst.</nobr></div>
<div style="position:absolute;top:70414;left:11"><nobr>•  Are polyhedral meshes better than hex or tet meshes?  You need to conduct your</nobr></div>
<div style="position:absolute;top:70445;left:44"><nobr>own numerical experiments.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:69950;left:318"><nobr><b>Mesh quality and cell type </b></nobr></div>
</span></font>

<div style="position:absolute;top:70645;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="88"><b>Page 88</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:70668;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:70828;left:11"><nobr>•  Just to end for good the meshing talk:</nobr></div>
<div style="position:absolute;top:70916;left:65"><nobr>•  A good mesh is a mesh that serves your project objectives. </nobr></div>
<div style="position:absolute;top:71005;left:65"><nobr>•  So, as long as your results are physically realistic, reliable and accurate; your</nobr></div>
<div style="position:absolute;top:71038;left:98"><nobr>mesh is good.</nobr></div>
<div style="position:absolute;top:71126;left:65"><nobr>•  At the end of the day, the final mesh will depend on the physic involve.</nobr></div>
<div style="position:absolute;top:71215;left:65"><nobr>•  Know your physics and generate a mesh able to resolve that physics, <b>without</b></nobr></div>
<div style="position:absolute;top:71248;left:98"><nobr><b>over-doing</b>.</nobr></div>
<div style="position:absolute;top:71336;left:65"><nobr>•  At this point, I think you got the idea of the relevance of the mesh.</nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:70760;left:318"><nobr><b>Mesh quality and cell type</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:71405;left:1007"><nobr><b>14 </b></nobr></div>
</span></font>

<div style="position:absolute;top:71455;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="89"><b>Page 89</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:71478;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:72215;left:1007"><nobr><b>15</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:71570;left:318"><nobr><b>Mesh quality and cell type</b></nobr></div>
</span></font>
<font face="Times" size="6"><span style="font-size:46px;font-family:Times">
<div style="position:absolute;top:71843;left:93"><nobr><b>Who owns the mesh, owns the solution </b></nobr></div>
</span></font>

<div style="position:absolute;top:72265;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="90"><b>Page 90</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:72288;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:72380;left:247"><nobr><b>My simulation is always exploding</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:72448;left:11"><nobr>•  If after choosing the numerical scheme, linear solvers, and time step, your simulation</nobr></div>
<div style="position:absolute;top:72479;left:44"><nobr>always crash, you can try this.</nobr></div>
<div style="position:absolute;top:72524;left:65"><nobr>•  Set the discretization scheme of the convective terms to <b><font color="#660066">upwind</font></b>.</nobr></div>
<div style="position:absolute;top:72568;left:65"><nobr>•  Set the discretization scheme of the diffusive terms to <b><font color="#660066">Gauss linear </font></b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:72603;left:98"><nobr><b>limited 0.5</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:72646;left:65"><nobr>•  Set the discretization scheme of the gradient terms to <b><font color="#660066">cellLimited Gauss</font></b></nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:72679;left:98"><nobr><b>linear 1.0</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:72722;left:65"><nobr>•  Set the temporal discretization scheme to <b><font color="#660066">euler</font></b>.</nobr></div>
<div style="position:absolute;top:72766;left:65"><nobr>•  Use the PISO method, and set <b><font color="#660066">nCorrectors 3</font></b>,	
 &nbsp;and	
 &nbsp;</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:72801;left:98"><nobr><b>nNonOrthogonalCorrectors 2</b><font color="#000000">.	
 &nbsp;</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:72844;left:65"><nobr>•  Use a high value of viscosity.</nobr></div>
<div style="position:absolute;top:72887;left:65"><nobr>•  Use Newton-Krylov type linear solvers (do not use multigrid), and set the</nobr></div>
<div style="position:absolute;top:72920;left:98"><nobr>minimum number of iterations to 5  (<b><font color="#660066">minIter 5</font></b>) for all variables.</nobr></div>
<div style="position:absolute;top:72964;left:65"><nobr>•  Use a CFL number of the order of 0.2 and set <b><font color="#660066">deltaT </font></b>to a low value in order to</nobr></div>
<div style="position:absolute;top:72997;left:98"><nobr>avoid jumps during the first iteration. </nobr></div>
</span></font>

<div style="position:absolute;top:73075;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="91"><b>Page 91</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:73098;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:73190;left:247"><nobr><b>My simulation is always exploding</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:73258;left:11"><nobr>•  This is one of a hell stable numerical scheme.  However is first order accurate.</nobr></div>
<div style="position:absolute;top:73346;left:11"><nobr>•  If this does not work, you should check your boundary conditions, initial conditions,</nobr></div>
<div style="position:absolute;top:73378;left:44"><nobr>physical properties and model properties.</nobr></div>
<div style="position:absolute;top:73468;left:11"><nobr>•  You should also know the limitations of the solver you are trying to use, maybe the</nobr></div>
<div style="position:absolute;top:73499;left:44"><nobr>solver is not compatible or can not solve the physics involve.</nobr></div>
</span></font>

<div style="position:absolute;top:73885;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="92"><b>Page 92</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:73908;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:74000;left:414"><nobr><b>functionObject</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:74068;left:11"><nobr>•  When using utilities (<i>e.g. </i><b><font color="#558ed5">mirrorMesh</font></b>), do not use <b><font color="#660066">functionObject </font></b>as they might</nobr></div>
<div style="position:absolute;top:74099;left:44"><nobr>cause some problems.  Yon can run the utility as follows,</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:74188;left:173"><nobr>•  <b>utility_name <font color="#000000">–noFunctionObjects</font></b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:74278;left:42"><nobr>Do this only if you are not interested in computing the actual <b><font color="#660066">functionObject</font></b></nobr></div>
<div style="position:absolute;top:74366;left:11"><nobr>•  If you forget to use a <b><font color="#660066">functionObject</font></b>, you do not need to re-run your simulation. </nobr></div>
<div style="position:absolute;top:74398;left:44"><nobr>You can use the utility <b><font color="#558ed5">execFlowFunctionObjects</font></b>, this utility will compute the</nobr></div>
</span></font>
<font color="#660066" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#660066">
<div style="position:absolute;top:74433;left:44"><nobr><b>functionObject </b><font color="#000000">values from the saved solutions.  Do not forget to add the new</font></nobr></div>
<div style="position:absolute;top:74466;left:44"><nobr><b>functionObject </b><font color="#000000">to your  </font><b><font color="#77933c">controlDict </font></b><font color="#000000">before using</font></nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:74497;left:44"><nobr><b>execFlowFunctionObjects</b><font color="#000000">.</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:74584;left:11"><nobr>•  Remember, <b><font color="#660066">functionObject </font></b>can be temporarily disabled by launching the solver</nobr></div>
<div style="position:absolute;top:74617;left:44"><nobr>(or utility) with the option <b>–noFunctionObjects</b>. </nobr></div>
</span></font>

<div style="position:absolute;top:74695;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="93"><b>Page 93</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:74718;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:74810;left:279"><nobr><b>On the incompressible solvers</b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:74878;left:11"><nobr>•  I am going to be really loud on this.</nobr></div>
<div style="position:absolute;top:74966;left:11"><nobr>•  For those using the incompressible solvers (<b><font color="#558ed5">icoFoam</font></b>, <b><font color="#558ed5">simpleFoam</font></b>, <b><font color="#558ed5">pisoFoam</font></b>,</nobr></div>
</span></font>
<font color="#558ed5" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#558ed5">
<div style="position:absolute;top:75000;left:44"><nobr><b>pimpleFoam</b><font color="#000000">), I want to remind you that the pressure used by these solvers is the</font></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:75031;left:44"><nobr>modified pressure or</nobr></div>
<div style="position:absolute;top:75253;left:65"><nobr>So when visualizing your results do not forget to multiply the pressure by the density</nobr></div>
<div style="position:absolute;top:75286;left:65"><nobr>in order to get the physical pressure.  This will not made much different if you are</nobr></div>
<div style="position:absolute;top:75317;left:65"><nobr>working with air, but if you are working with water, you will notice the difference.</nobr></div>
</span></font>
<font face="Times" size="7"><span style="font-size:51px;font-family:Times">
<div style="position:absolute;top:75120;left:457"><nobr>P =</nobr></div>
<div style="position:absolute;top:75083;left:578"><nobr>p</nobr></div>
<div style="position:absolute;top:75157;left:577"><nobr>ρ</nobr></div>
</span></font>

<div style="position:absolute;top:75505;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="94"><b>Page 94</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:75528;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:75620;left:346"><nobr><b>Updating OpenFOAM® </b></nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:75688;left:11"><nobr>•  For those who like to always get the latest version of OpenFOAM®, I will give you a</nobr></div>
<div style="position:absolute;top:75719;left:44"><nobr>word of advise.</nobr></div>
<div style="position:absolute;top:75782;left:11"><nobr>•  Before changing to the newest version, run a series of test cases just to check the</nobr></div>
<div style="position:absolute;top:75814;left:44"><nobr>consistency of the results. </nobr></div>
<div style="position:absolute;top:75877;left:11"><nobr>•  It has come to my attention (and maybe yours as well), that the guys of OpenFOAM®</nobr></div>
<div style="position:absolute;top:75910;left:44"><nobr>might change (and will change) something in the new releases and you might not get</nobr></div>
<div style="position:absolute;top:75941;left:44"><nobr>the same results. </nobr></div>
<div style="position:absolute;top:76004;left:11"><nobr>•  No need to say that very often the syntax change from version to version.</nobr></div>
<div style="position:absolute;top:76066;left:11"><nobr>•  Personally speaking, I have a test matrix of five cases (involving different physics and</nobr></div>
<div style="position:absolute;top:76099;left:44"><nobr>models).  So before deploying the new version, I always check if I get the same</nobr></div>
<div style="position:absolute;top:76132;left:44"><nobr>results.  This is part of the continuous and arduous task of verification and validation.</nobr></div>
<div style="position:absolute;top:76193;left:11"><nobr>•  A new version of OpenFOAM® not necessary is a guarantee of innovation, and an</nobr></div>
<div style="position:absolute;top:76226;left:44"><nobr>old version of OpenFOAM®  is no guarantee of efficiency. </nobr></div>
</span></font>

<div style="position:absolute;top:76315;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="95"><b>Page 95</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:76338;left:187"><nobr><b>Tips and tricks in OpenFOAM®</b></nobr></div>
</span></font>
<font face="Times" size="5"><span style="font-size:34px;font-family:Times">
<div style="position:absolute;top:76430;left:288"><nobr><b>Best tip ever (and totally free)</b></nobr></div>
<div style="position:absolute;top:76555;left:25"><nobr>•  I know I sound like a broken record on this, but try to always</nobr></div>
<div style="position:absolute;top:76597;left:58"><nobr>get a good quality mesh.</nobr></div>
<div style="position:absolute;top:76684;left:25"><nobr>•  Use accurate and robust numerical schemes (in time and</nobr></div>
<div style="position:absolute;top:76727;left:58"><nobr>space).</nobr></div>
<div style="position:absolute;top:76813;left:25"><nobr>•  At this point we all know what is a good quality mesh and</nobr></div>
<div style="position:absolute;top:76856;left:58"><nobr>what is an accurate numerical scheme, if not, please read the</nobr></div>
<div style="position:absolute;top:76900;left:58"><nobr>theory.  You do not do CFD without understanding the theory</nobr></div>
<div style="position:absolute;top:76943;left:58"><nobr>and the physics involve.</nobr></div>
</span></font>
<font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:77075;left:1007"><nobr><b>16 </b></nobr></div>
</span></font>

<div style="position:absolute;top:77125;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="96"><b>Page 96</b></a></font></td></tr></tbody></table></div><font color="#000000" face="Times" size="6"><span style="font-size:46px;font-family:Times;color:#000000">
<div style="position:absolute;top:77148;left:219"><nobr><b>Thank you for your attention </b></nobr></div>
</span></font>

<div style="position:absolute;top:77935;left:0"><hr><table border="0" width="100%"><tbody><tr><td align="right" bgcolor="eeeeee"><font face="arial,sans-serif"><a name="97"><b>Page 97</b></a></font></td></tr></tbody></table></div><font face="Times" size="4"><span style="font-size:25px;font-family:Times">
<div style="position:absolute;top:78358;left:156"><nobr>These lectures notes are licensed under the Creative Commons</nobr></div>
<div style="position:absolute;top:78390;left:156"><nobr>Attribution-ShareAlike 4.0 International License.  </nobr></div>
<div style="position:absolute;top:78454;left:156"><nobr>To view a copy of this license, visit</nobr></div>
</span></font>
<font color="#0000ff" face="Times" size="4"><span style="font-size:25px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:78487;left:156"><nobr>http://creativecommons.org/licenses/by-sa/4.0/</nobr></div>
</span></font>
<!-- t53402r208a1c30323e30105n10u16l0m0k0 -->


</div></body></html>